"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[497],{1744:function(e,t,n){n.d(t,{xR:function(){return rs}});var r,o,a,i,s,l,c,u,d,p,m,f,v,h,g,b,y=n(2784),E=n(6916),w=n(5851),$=n(3958),x=n.n($),C=n(671),k=n(4100),S=n(3947),N=n(7120),O=n(1727),R=n(5885),M=n(6870),L=n(6214),j=n(7338),F=n(4257),A=n(6253),T=n(6954),D=n.n(T),I=n(4826),H=n.n(I),P=n(5384),B=n(3542),z=function(){return(z=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function J(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&0>t.indexOf(r)&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,r=Object.getOwnPropertySymbols(e);o<r.length;o++)0>t.indexOf(r[o])&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]]);return n}function U(e,t,n,r){return new(n||(n=Promise))(function(o,a){function i(e){try{l(r.next(e))}catch(e){a(e)}}function s(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?o(e.value):((t=e.value)instanceof n?t:new n(function(e){e(t)})).then(i,s)}l((r=r.apply(e,t||[])).next())})}function _(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}}function W(e,t,n){if(n||2==arguments.length)for(var r,o=0,a=t.length;o<a;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))}var Z=function(e){return y.createElement("svg",z({fill:"currentColor",height:"16",viewBox:"0 0 16 16",width:"16",xmlns:"http://www.w3.org/2000/svg"},e))},V=function(){return y.createElement(Z,{fill:"none",stroke:"currentColor"},y.createElement("title",null,"Restart script"),y.createElement("path",{d:"M8 2C4.68629 2 2 4.68629 2 8C2 10.0946 3.07333 11.9385 4.7 13.0118",strokeLinecap:"round"}),y.createElement("path",{d:"M14.0005 7.9998C14.0005 5.82095 12.8391 3.91335 11.1016 2.8623",strokeLinecap:"round"}),y.createElement("path",{d:"M14.0003 2.3335H11.167C10.8908 2.3335 10.667 2.55735 10.667 2.8335V5.66683",strokeLinecap:"round"}),y.createElement("path",{d:"M1.99967 13.6665L4.83301 13.6665C5.10915 13.6665 5.33301 13.4426 5.33301 13.1665L5.33301 10.3332",strokeLinecap:"round"}),y.createElement("path",{d:"M10 10L12 12L10 14",strokeLinecap:"round",strokeLinejoin:"round"}),y.createElement("path",{d:"M14.667 14L12.667 14",strokeLinecap:"round",strokeLinejoin:"round"}))},Y=function(){return y.createElement(Z,null,y.createElement("title",null,"Run sandbox"),y.createElement("path",{d:"M11.0792 8.1078C11.2793 8.25007 11.27 8.55012 11.0616 8.67981L6.02535 11.8135C5.79638 11.956 5.5 11.7913 5.5 11.5216L5.5 8.40703L5.5 4.80661C5.5 4.52735 5.81537 4.36463 6.04296 4.52647L11.0792 8.1078Z"}))},G=function(){return y.createElement(Z,null,y.createElement("title",null,"Click to go back"),y.createElement("path",{d:"M9.64645 12.3536C9.84171 12.5488 10.1583 12.5488 10.3536 12.3536C10.5488 12.1583 10.5488 11.8417 10.3536 11.6464L9.64645 12.3536ZM10.3536 4.35355C10.5488 4.15829 10.5488 3.84171 10.3536 3.64644C10.1583 3.45118 9.84171 3.45118 9.64645 3.64644L10.3536 4.35355ZM6.07072 7.92929L5.71716 7.57573L6.07072 7.92929ZM10.3536 11.6464L6.42427 7.71716L5.71716 8.42426L9.64645 12.3536L10.3536 11.6464ZM6.42427 8.28284L10.3536 4.35355L9.64645 3.64644L5.71716 7.57573L6.42427 8.28284ZM6.42427 7.71716C6.58048 7.87337 6.58048 8.12663 6.42427 8.28284L5.71716 7.57573C5.48285 7.81005 5.48285 8.18995 5.71716 8.42426L6.42427 7.71716Z"}))},q=function(){return y.createElement(Z,null,y.createElement("title",null,"Click to go forward"),y.createElement("path",{d:"M6.35355 3.64645C6.15829 3.45118 5.84171 3.45118 5.64645 3.64645C5.45118 3.84171 5.45118 4.15829 5.64645 4.35355L6.35355 3.64645ZM5.64645 11.6464C5.45118 11.8417 5.45118 12.1583 5.64645 12.3536C5.84171 12.5488 6.15829 12.5488 6.35355 12.3536L5.64645 11.6464ZM9.92929 8.07071L10.2828 8.42426L9.92929 8.07071ZM5.64645 4.35355L9.57574 8.28284L10.2828 7.57574L6.35355 3.64645L5.64645 4.35355ZM9.57574 7.71716L5.64645 11.6464L6.35355 12.3536L10.2828 8.42426L9.57574 7.71716ZM9.57574 8.28284C9.41952 8.12663 9.41953 7.87337 9.57574 7.71716L10.2828 8.42426C10.5172 8.18995 10.5172 7.81005 10.2828 7.57574L9.57574 8.28284Z"}))},X=function(){return y.createElement(Z,null,y.createElement("title",null,"Refresh preview"),y.createElement("path",{clipRule:"evenodd",d:"M3.83325 7.99992C3.83325 5.69867 5.69853 3.83325 7.99934 3.83325C9.81246 3.83325 11.3563 4.99195 11.9285 6.61097C11.9396 6.6425 11.9536 6.67221 11.97 6.69992H8.80005C8.52391 6.69992 8.30005 6.92378 8.30005 7.19992C8.30005 7.47606 8.52391 7.69992 8.80005 7.69992H12.5667C12.8981 7.69992 13.1667 7.43129 13.1667 7.09992V3.33325C13.1667 3.05711 12.9429 2.83325 12.6667 2.83325C12.3906 2.83325 12.1667 3.05711 12.1667 3.33325V4.94608C11.2268 3.66522 9.7106 2.83325 7.99934 2.83325C5.14613 2.83325 2.83325 5.14651 2.83325 7.99992C2.83325 10.8533 5.14613 13.1666 7.99934 13.1666C9.91218 13.1666 11.5815 12.1266 12.474 10.5836C12.6123 10.3446 12.5306 10.0387 12.2915 9.90044C12.0525 9.76218 11.7466 9.84387 11.6084 10.0829C10.8873 11.3296 9.54072 12.1666 7.99934 12.1666C5.69853 12.1666 3.83325 10.3012 3.83325 7.99992Z",fillRule:"evenodd"}))},K=function(){return y.createElement(Z,{fill:"none",stroke:"currentColor"},y.createElement("title",null,"Clean"),y.createElement("circle",{cx:"7.99998",cy:"8.00004",r:"4.66667",strokeLinecap:"round"}),y.createElement("path",{d:"M4.66669 4.66663L11.3334 11.3333"}))},Q=function(){return y.createElement(Z,{fill:"none",stroke:"currentColor"},y.createElement("title",null,"Open on CodeSandbox"),y.createElement("path",{d:"M6.66665 3.33337H4.33331C3.78103 3.33337 3.33331 3.78109 3.33331 4.33337V11.6667C3.33331 12.219 3.78103 12.6667 4.33331 12.6667H11.6666C12.2189 12.6667 12.6666 12.219 12.6666 11.6667V9.33337",strokeLinecap:"round"}),y.createElement("path",{d:"M10 3.33337H12.5667C12.6219 3.33337 12.6667 3.37815 12.6667 3.43337V6.00004",strokeLinecap:"round"}),y.createElement("path",{d:"M7.33331 8.66668L12.5333 3.46667",strokeLinecap:"round"}))},ee=function(){return React.createElement(Z,null,React.createElement("title",null,"Directory"),React.createElement("path",{d:"M12.5526 12.6667H3.66675C3.2922 12.6667 2.96575 12.4608 2.79442 12.156L3.81072 8.0908C3.92201 7.64563 4.32199 7.33333 4.78086 7.33333H13.386C14.0365 7.33333 14.5139 7.94472 14.3561 8.57587L13.5228 11.9092C13.4115 12.3544 13.0115 12.6667 12.5526 12.6667Z",fill:"currentColor"}),React.createElement("path",{d:"M13.3334 6.63333V6.33333C13.3334 5.78105 12.8857 5.33333 12.3334 5.33333H8.30286C8.10543 5.33333 7.91242 5.2749 7.74816 5.16538L6.25201 4.16795C6.08774 4.05844 5.89473 4 5.69731 4H3.66675C3.11446 4 2.66675 4.44772 2.66675 5L2.66675 11.6667C2.66675 12.219 3.11446 12.6667 3.66675 12.6667H12.5526C13.0115 12.6667 13.4115 12.3544 13.5228 11.9092L14.3561 8.57587C14.5139 7.94472 14.0365 7.33333 13.386 7.33333H4.78086C4.32199 7.33333 3.92201 7.64563 3.81072 8.0908L2.75008 12.3333",fill:"none",stroke:"currentColor",strokeLinecap:"round"}))},et=function(){return React.createElement(Z,null,React.createElement("title",null,"Directory"),React.createElement("path",{d:"M12.3334 12.6667H3.66675C3.11446 12.6667 2.66675 12.219 2.66675 11.6667V5C2.66675 4.44772 3.11446 4 3.66675 4H5.69731C5.89473 4 6.08774 4.05844 6.25201 4.16795L7.74816 5.16538C7.91242 5.2749 8.10543 5.33333 8.30286 5.33333H12.3334C12.8857 5.33333 13.3334 5.78105 13.3334 6.33333V11.6667C13.3334 12.219 12.8857 12.6667 12.3334 12.6667Z",fill:"currentColor",stroke:"currentColor",strokeLinecap:"round"}))},en=function(){return React.createElement(Z,{fill:"currentColor"},React.createElement("title",null,"File"),React.createElement("path",{clipRule:"evenodd",d:"M4.5 4.33325C4.5 4.05711 4.72386 3.83325 5 3.83325H8.16675V6.56659C8.16675 6.89795 8.43538 7.16658 8.76675 7.16658H11.5V12.3333C11.5 12.6094 11.2761 12.8333 11 12.8333H5C4.72386 12.8333 4.5 12.6094 4.5 12.3333V4.33325ZM12.5 6.67568C12.5001 6.67265 12.5001 6.66962 12.5001 6.66658C12.5001 6.66355 12.5001 6.66052 12.5 6.65749V6.41413C12.5 6.01631 12.342 5.63478 12.0607 5.35347L9.97978 3.27259C9.69848 2.99129 9.31694 2.83325 8.91912 2.83325H8.66675H5C4.17157 2.83325 3.5 3.50483 3.5 4.33325V12.3333C3.5 13.1617 4.17157 13.8333 5 13.8333H11C11.8284 13.8333 12.5 13.1617 12.5 12.3333V6.67568ZM9.16675 3.89888C9.20518 3.92078 9.24085 3.94787 9.27267 3.9797L11.3536 6.06058C11.3854 6.09243 11.4125 6.12813 11.4344 6.16658H9.16675V3.89888Z",fillRule:"evenodd"}))},er=function(){return y.createElement(Z,{stroke:"currentColor"},y.createElement("title",null,"Close file"),y.createElement("path",{d:"M12 4L4 12",strokeLinecap:"round"}),y.createElement("path",{d:"M4 4L12 12",strokeLinecap:"round"}))},eo=function(){return y.createElement(Z,null,y.createElement("title",null,"Open browser console"),y.createElement("path",{d:"M5.65871 3.62037C5.44905 3.44066 5.1334 3.46494 4.95368 3.6746C4.77397 3.88427 4.79825 4.19992 5.00792 4.37963L5.65871 3.62037ZM5.00792 11.6204C4.79825 11.8001 4.77397 12.1157 4.95368 12.3254C5.1334 12.5351 5.44905 12.5593 5.65871 12.3796L5.00792 11.6204ZM9.9114 7.92407L10.2368 7.54445L9.9114 7.92407ZM5.00792 4.37963L9.586 8.3037L10.2368 7.54445L5.65871 3.62037L5.00792 4.37963ZM9.586 7.6963L5.00792 11.6204L5.65871 12.3796L10.2368 8.45555L9.586 7.6963ZM9.586 8.3037C9.39976 8.14407 9.39976 7.85594 9.586 7.6963L10.2368 8.45555C10.5162 8.2161 10.5162 7.7839 10.2368 7.54445L9.586 8.3037Z"}),y.createElement("path",{d:"M10 11.5C9.72386 11.5 9.5 11.7239 9.5 12C9.5 12.2761 9.72386 12.5 10 12.5V11.5ZM14.6667 12.5C14.9428 12.5 15.1667 12.2761 15.1667 12C15.1667 11.7239 14.9428 11.5 14.6667 11.5V12.5ZM10 12.5H14.6667V11.5H10V12.5Z"}))},ea={colors:{surface1:"#ffffff",surface2:"#EFEFEF",surface3:"#F3F3F3",disabled:"#C5C5C5",base:"#323232",clickable:"#808080",hover:"#4D4D4D",accent:"#3973E0",error:"#EA3323",errorSurface:"#FCF1F0",warning:"#6A4516",warningSurface:"#FEF2C0"},syntax:{plain:"#151515",comment:{color:"#999",fontStyle:"italic"},keyword:"#7C5AE3",tag:"#0971F1",punctuation:"#3B3B3B",definition:"#85A600",property:"#3B3B3B",static:"#3B3B3B",string:"#2E6BD0"},font:{body:'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"',mono:'"Fira Mono", "DejaVu Sans Mono", Menlo, Consolas, "Liberation Mono", Monaco, "Lucida Console", monospace',size:"13px",lineHeight:"20px"}},ei={colors:{surface1:"#151515",surface2:"#252525",surface3:"#2F2F2F",disabled:"#4D4D4D",base:"#808080",clickable:"#999999",hover:"#C5C5C5",accent:"#E5E5E5",error:"#FFB4A6",errorSurface:"#690000",warning:"#E7C400",warningSurface:"#3A3000"},syntax:{plain:"#FFFFFF",comment:{color:"#757575",fontStyle:"italic"},keyword:"#77B7D7",tag:"#DFAB5C",punctuation:"#ffffff",definition:"#86D9CA",property:"#77B7D7",static:"#C64640",string:"#977CDC"},font:{body:'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"',mono:'"Fira Mono", "DejaVu Sans Mono", Menlo, Consolas, "Liberation Mono", Monaco, "Lucida Console", monospace',size:"13px",lineHeight:"20px"}},es={light:ea,dark:ei,auto:"undefined"!=typeof window&&(null===(o=null==window?void 0:window.matchMedia)||void 0===o?void 0:o.call(window,"(prefers-color-scheme: dark)").matches)?ei:ea},el=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e.filter(Boolean).join(" ")},ec=function(e){var t=e.lastIndexOf("/");return e.slice(t+1)},eu=function(e,t){var n=("/"===e[0]?e.slice(1):e).split("/"),r=[];if(1===n.length)r.unshift(n[0]);else for(var o=0;o<t.length;o++)for(var a=t[o].split("/"),i=1;i<=n.length;i++){var s=n[n.length-i],l=a[a.length-i];if(r.length<i&&r.unshift(s),s!==l)break}return r.length<n.length&&r.unshift(".."),r.join("/")},ed=function(e){var t=0,n=0,r=0;if(e.startsWith("#")){if(e.length<7)return!0;t=parseInt(e.substr(1,2),16),n=parseInt(e.substr(3,2),16),r=parseInt(e.substr(5,2),16)}else{var o=e.replace("rgb(","").replace("rgba(","").replace(")","").split(",");if(o.length<3)return!0;t=parseInt(o[0],10),n=parseInt(o[1],10),r=parseInt(o[2],10)}return(299*t+587*n+114*r)/1e3<128},ep=function(){return Math.floor(1e4*Math.random()).toString()},em=function(){return""},ef=function(){return em},ev=Object.getOwnPropertyDescriptors({toString:em});Object.defineProperties(em,ev),Object.defineProperties(ef,ev);var eh=(a=void 0!==B&&B.env.SANDPACK_BARE_COMPONENTS?{createTheme:em,css:ef,getCssText:em,keyframes:ef}:(0,w.Th)({prefix:"sp"})).createTheme,eg=a.css,eb=(a.getCssText,a.keyframes),ey={space:Array(11).fill(" ").reduce(function(e,t,n){var r;return z(z({},e),((r={})[n+1]=(n+1)*4+"px",r))},{}),border:{radius:"4px"},layout:{height:"300px",headerHeight:"40px"},transitions:{default:"150ms ease"},zIndices:{base:"1",overlay:"2",top:"3"}},eE=function(e){var t=Object.entries(e.syntax).reduce(function(e,t){var n,r=t[0],o=t[1],a=((n={})["color-"+r]=o,n);return"object"==typeof o&&(a=Object.entries(o).reduce(function(e,t){var n,o=t[0],a=t[1];return z(z({},e),((n={})[o+"-"+r]=a,n))},{})),z(z({},e),a)},{});return z(z({},ey),{colors:e.colors,font:e.font,syntax:t})},ew=function(e){if(void 0===e&&(e="light"),"string"==typeof e){var t,n,r,o,a,i=es[e];if(!i)throw Error("[sandpack-react]: invalid theme '"+e+"' provided.");return{theme:i,id:e,mode:ed(i.colors.surface1)?"dark":"light"}}var s=ed(null!==(n=null===(t=null==e?void 0:e.colors)||void 0===t?void 0:t.surface1)&&void 0!==n?n:ea.colors.surface1)?"dark":"light",l="dark"===s?ei:ea,c={colors:z(z({},l.colors),null!==(r=null==e?void 0:e.colors)&&void 0!==r?r:{}),syntax:z(z({},l.syntax),null!==(o=null==e?void 0:e.syntax)&&void 0!==o?o:{}),font:z(z({},l.font),null!==(a=null==e?void 0:e.font)&&void 0!==a?a:{})},u=e?e$(JSON.stringify(c)):"default";return{theme:c,id:"sp-"+u,mode:s}},e$=function(e){for(var t=0,n=0;n<e.length;t&=t)t=31*t+e.charCodeAt(n++);return Math.abs(t)},ex=eg({all:"initial",fontSize:"$font$size",fontFamily:"$font$body",display:"block",boxSizing:"border-box",textRendering:"optimizeLegibility",WebkitTapHighlightColor:"transparent",WebkitFontSmoothing:"subpixel-antialiased",variants:{variant:{dark:{colorScheme:"dark"},light:{colorScheme:"light"}}},"@media screen and (min-resolution: 2dppx)":{WebkitFontSmoothing:"antialiased",MozOsxFontSmoothing:"grayscale"},"*":{boxSizing:"border-box"},".sp-wrapper:focus":{outline:"0"}}),eC=y.createContext({theme:ea,id:"light",mode:"light"}),ek=function(e){var t=e.theme,n=e.children,r=e.className,o=J(e,["theme","children","className"]),a=ew(t),i=a.theme,s=a.id,l=a.mode,c=(0,E.E)("sp"),u=y.useMemo(function(){return eh(s,eE(i))},[i,s]);return y.createElement(eC.Provider,{value:{theme:i,id:s,mode:l}},y.createElement("div",z({className:el(c("wrapper"),u.toString(),ex({variant:l}),r)},o),n))};eC.Consumer;var eS={"/styles.css":{code:"body {\n  font-family: sans-serif;\n  -webkit-font-smoothing: auto;\n  -moz-font-smoothing: auto;\n  -moz-osx-font-smoothing: grayscale;\n  font-smoothing: auto;\n  text-rendering: optimizeLegibility;\n  font-smooth: always;\n  -webkit-tap-highlight-color: transparent;\n  -webkit-touch-callout: none;\n}\n\nh1 {\n  font-size: 1.5rem;\n}"}},eN={files:{"/src/styles.css":eS["/styles.css"],"/src/pages/index.astro":{code:'---\nimport "../styles.css";\nconst data = "world";\n---\n\n<h1>Hello {data}</h1>\n\n<style>\n  h1 {\n    font-size: 1.5rem;\n  }\n</style>'},".env":{code:'ASTRO_TELEMETRY_DISABLED="1"'},"/package.json":{code:JSON.stringify({dependencies:{astro:"^1.6.12","esbuild-wasm":"^0.15.16"},scripts:{dev:"astro dev",start:"astro dev",build:"astro build",preview:"astro preview",astro:"astro"}})}},main:"/src/pages/index.astro",environment:"node"},eO={files:z(z({},eS),{"/pages/_app.js":{code:"import '../styles.css'\n\nexport default function MyApp({ Component, pageProps }) {\n  return <Component {...pageProps} />\n}"},"/pages/index.js":{code:'export default function Home({ data }) {\n  return (\n    <div>\n      <h1>Hello {data}</h1>\n    </div>\n  );\n}\n  \nexport function getServerSideProps() {\n  return {\n    props: { data: "world" },\n  }\n}\n'},"/next.config.js":{code:"/** @type {import('next').NextConfig} */\nconst nextConfig = {\n  reactStrictMode: true,\n  swcMinify: true,\n}\n\nmodule.exports = nextConfig\n"},".env.development":{code:"NEXT_TELEMETRY_DISABLED=1"},"/package.json":{code:JSON.stringify({name:"my-app",version:"0.1.0",private:!0,scripts:{dev:"next dev",build:"next build",start:"next start",lint:"next lint"},dependencies:{next:"12.1.6",react:"18.2.0","react-dom":"18.2.0","@next/swc-wasm-nodejs":"12.1.6"}})}}),main:"/pages/index.js",environment:"node"},eR={files:{"/index.js":{code:"const http = require('http');\n\nconst hostname = '127.0.0.1';\nconst port = 3000;\n\nconst server = http.createServer((req, res) => {\n  res.statusCode = 200;\n  res.setHeader('Content-Type', 'text/html');\n  res.end('Hello world');\n});\n\nserver.listen(port, hostname, () => {\n  console.log(`Server running at http://${hostname}:${port}/`);\n});"},"/package.json":{code:JSON.stringify({dependencies:{},scripts:{start:"node index.js"},main:"index.js"})}},main:"/index.js",environment:"node"},eM={files:z(z({},eS),{"/index.js":{code:'import "./styles.css";\n\ndocument.getElementById("app").innerHTML = `\n<h1>Hello world</h1>\n`;\n'},"/index.html":{code:'<!DOCTYPE html>\n<html lang="en">\n  <head>\n    <meta charset="UTF-8" />\n    <meta name="viewport" content="width=device-width, initial-scale=1.0" />\n    <title>Vite App</title>\n  </head>\n  <body>\n    <div id="app"></div>\n    <script type="module" src="/index.js"></script>\n  </body>\n</html>\n'},"/package.json":{code:JSON.stringify({scripts:{dev:"vite",build:"vite build",preview:"vite preview"},devDependencies:{vite:"^4.0.0","esbuild-wasm":"0.15.12"}})}}),main:"/index.js",environment:"node"},eL={files:z(z({},eS),{"/App.jsx":{code:'export default function App() {\n  const data = "world"\n\n  return <h1>Hello {data}</h1>\n}\n'},"/index.jsx":{code:'import { StrictMode } from "react";\nimport { createRoot } from "react-dom/client";\nimport "./styles.css";\n\nimport App from "./App";\n\nconst root = createRoot(document.getElementById("root"));\nroot.render(\n  <StrictMode>\n    <App />\n  </StrictMode>\n);'},"/index.html":{code:'<!DOCTYPE html>\n<html lang="en">\n  <head>\n    <meta charset="UTF-8" />\n    <meta name="viewport" content="width=device-width, initial-scale=1.0" />\n    <title>Vite App</title>\n  </head>\n  <body>\n    <div id="root"></div>\n    <script type="module" src="/index.jsx"></script>\n  </body>\n</html>\n'},"/package.json":{code:JSON.stringify({scripts:{dev:"vite",build:"vite build",preview:"vite preview"},dependencies:{react:"^18.2.0","react-dom":"^18.2.0"},devDependencies:{"@vitejs/plugin-react":"3.1.0",vite:"4.0.0","esbuild-wasm":"0.15.12"}})},"/vite.config.js":{code:'import { defineConfig } from "vite";\nimport react from "@vitejs/plugin-react";\n\n// https://vitejs.dev/config/\nexport default defineConfig({\n  plugins: [react()],\n});\n'}}),main:"/App.jsx",environment:"node"},ej={files:{"/src/styles.css":eS["/styles.css"],"/src/App.svelte":{code:'<script>\nconst data = "world";\n</script>\n\n<h1>Hello {data}</h1>\n\n<style>\nh1 {\n  font-size: 1.5rem;\n}\n</style>'},"/src/main.js":{code:"import App from './App.svelte'\nimport \"./styles.css\"\n\nconst app = new App({\n  target: document.getElementById('app'),\n})\n\nexport default app"},"/index.html":{code:'<!DOCTYPE html>\n<html lang="en">\n  <head>\n    <meta charset="UTF-8" />\n    <meta name="viewport" content="width=device-width, initial-scale=1.0" />\n    <title>Vite App</title>\n  </head>\n  <body>\n    <div id="app"></div>\n    <script type="module" src="/src/main.js"></script>\n  </body>\n</html>\n'},"/vite.config.js":{code:"import { defineConfig } from 'vite'\nimport { svelte } from '@sveltejs/vite-plugin-svelte'\n\n// https://vitejs.dev/config/\nexport default defineConfig({\n  plugins: [svelte()],\n})"},"/package.json":{code:JSON.stringify({type:"module",scripts:{dev:"vite"},devDependencies:{"@sveltejs/vite-plugin-svelte":"^2.0.2",svelte:"^3.55.1",vite:"^4.0.4","esbuild-wasm":"0.15.12"}})}},main:"/src/App.svelte",environment:"node"},eF={files:{"/src/styles.css":eS["/styles.css"],"/src/App.vue":{code:'<script setup>\nimport { ref } from "vue";\n\nconst data = ref("world");\n</script>\n\n<template>\n  <h1>Hello {{ data }}</h1>\n</template>\n\n<style>\nh1 {\n  font-size: 1.5rem;\n}\n</style>'},"/src/main.js":{code:"import { createApp } from 'vue'\nimport App from './App.vue'\nimport \"./styles.css\"\n            \ncreateApp(App).mount('#app')            \n"},"/index.html":{code:'<!DOCTYPE html>\n<html lang="en">\n  <head>\n    <meta charset="UTF-8" />\n    <meta name="viewport" content="width=device-width, initial-scale=1.0" />\n    <title>Vite App</title>\n  </head>\n  <body>\n    <div id="app"></div>\n    <script type="module" src="/src/main.js"></script>\n  </body>\n</html>\n'},"/vite.config.js":{code:"import { defineConfig } from 'vite'\nimport vue from '@vitejs/plugin-vue'\n\n// https://vitejs.dev/config/\nexport default defineConfig({\n  plugins: [vue()]\n})\n"},"/package.json":{code:JSON.stringify({scripts:{dev:"vite",build:"vite build",preview:"vite preview"},dependencies:{vue:"^3.2.45"},devDependencies:{"@vitejs/plugin-vue":"^3.2.0",vite:"4.0.0","esbuild-wasm":"0.15.12"}})}},main:"/src/App.vue",environment:"node"},eA={files:{"/src/app/app.component.css":eS["/styles.css"],"/src/app/app.component.html":{code:"<div>\n<h1>{{ helloWorld }}</h1>\n</div>     \n"},"/src/app/app.component.ts":{code:'import { Component } from "@angular/core";\n\n@Component({\n  selector: "app-root",\n  templateUrl: "./app.component.html",\n  styleUrls: ["./app.component.css"]\n})\nexport class AppComponent {\n  helloWorld = "Hello world";\n}           \n'},"/src/app/app.module.ts":{code:'import { BrowserModule } from "@angular/platform-browser";\nimport { NgModule } from "@angular/core";\n      \nimport { AppComponent } from "./app.component";\n      \n@NgModule({\n  declarations: [AppComponent],\n  imports: [BrowserModule],\n  providers: [],\n  bootstrap: [AppComponent]\n})\nexport class AppModule {}       \n'},"/src/index.html":{code:'<!doctype html>\n<html lang="en">\n      \n<head>\n  <meta charset="utf-8">\n  <title>Angular</title>\n  <base href="/">\n      \n  <meta name="viewport" content="width=device-width, initial-scale=1">\n  <link rel="icon" type="image/x-icon" href="favicon.ico">\n</head>\n      \n<body>\n   <app-root></app-root>\n</body>\n      \n</html>\n'},"/src/main.ts":{code:'import { enableProdMode } from "@angular/core";\nimport { platformBrowserDynamic } from "@angular/platform-browser-dynamic";\n      \nimport { AppModule } from "./app/app.module";      \n\nplatformBrowserDynamic()\n  .bootstrapModule(AppModule)\n  .catch(err => console.log(err));\n      \n'},"/src/polyfills.ts":{code:'import "core-js/proposals/reflect-metadata";   \n      import "zone.js/dist/zone";\n'},"/package.json":{code:JSON.stringify({dependencies:{"@angular/core":"^11.2.0","@angular/platform-browser":"^11.2.0","@angular/platform-browser-dynamic":"^11.2.0","@angular/common":"^11.2.0","@angular/compiler":"^11.2.0","zone.js":"0.11.3","core-js":"3.8.3",rxjs:"6.6.3"},main:"/src/main.ts"})}},main:"/src/app/app.component.ts",environment:"angular-cli"},eT={files:z(z({},eS),{"/App.js":{code:"export default function App() {\n  return <h1>Hello world</h1>\n}\n"},"/index.js":{code:'import React, { StrictMode } from "react";\nimport { createRoot } from "react-dom/client";\nimport "./styles.css";\n\nimport App from "./App";\n\nconst root = createRoot(document.getElementById("root"));\nroot.render(\n  <StrictMode>\n    <App />\n  </StrictMode>\n);'},"/public/index.html":{code:'<!DOCTYPE html>\n<html lang="en">\n  <head>\n    <meta charset="UTF-8">\n    <meta name="viewport" content="width=device-width, initial-scale=1.0">\n    <title>Document</title>\n  </head>\n  <body>\n    <div id="root"></div>\n  </body>\n</html>'},"/package.json":{code:JSON.stringify({dependencies:{react:"^18.0.0","react-dom":"^18.0.0","react-scripts":"^4.0.0"},main:"/index.js"})}}),main:"/App.js",environment:"create-react-app"},eD={files:z(z({},eS),{"tsconfig.json":{code:'{\n  "include": [\n    "./**/*"\n  ],\n  "compilerOptions": {\n    "strict": true,\n    "esModuleInterop": true,\n    "lib": [ "dom", "es2015" ],\n    "jsx": "react-jsx"\n  }\n}'},"/App.tsx":{code:"export default function App(): JSX.Element {\n  return <h1>Hello world</h1>\n}\n"},"/index.tsx":{code:'import React, { StrictMode } from "react";\nimport { createRoot } from "react-dom/client";\nimport "./styles.css";\n\nimport App from "./App";\n\nconst root = createRoot(document.getElementById("root"));\nroot.render(\n  <StrictMode>\n    <App />\n  </StrictMode>\n);'},"/public/index.html":{code:'<!DOCTYPE html>\n<html lang="en">\n  <head>\n    <meta charset="UTF-8">\n    <meta name="viewport" content="width=device-width, initial-scale=1.0">\n    <title>Document</title>\n  </head>\n  <body>\n    <div id="root"></div>\n  </body>\n</html>'},"/package.json":{code:JSON.stringify({dependencies:{react:"^18.0.0","react-dom":"^18.0.0","react-scripts":"^4.0.0"},devDependencies:{"@types/react":"^18.0.0","@types/react-dom":"^18.0.0",typescript:"^4.0.0"},main:"/index.tsx"})}}),main:"/App.tsx",environment:"create-react-app"},eI={files:z(z({},eS),{"/App.tsx":{code:'import { Component } from "solid-js";\n\nconst App: Component = () => {\n  return <h1>Hello world</h1>\n};\n\nexport default App;'},"/index.tsx":{code:'import { render } from "solid-js/web";\nimport App from "./App";\n\nimport "./styles.css";\n\nrender(() => <App />, document.getElementById("app"));'},"/index.html":{code:'<html>\n<head>\n  <title>Parcel Sandbox</title>\n  <meta charset="UTF-8" />\n</head>\n<body>\n  <div id="app"></div>\n  <script src="src/index.tsx"></script>\n</body>\n</html>'},"/package.json":{code:JSON.stringify({dependencies:{"solid-js":"1.3.15"},main:"/index.tsx"})}}),main:"/App.tsx",environment:"solid"},eH={files:z(z({},eS),{"/App.svelte":{code:"<style>\n  h1 {\n    font-size: 1.5rem;\n  }\n</style>\n\n<script>\n  let name = 'world';\n</script>\n\n<main>\n  <h1>Hello {name}</h1>\n</main>"},"/index.js":{code:'import App from "./App.svelte";\nimport "./styles.css";\n\nconst app = new App({\n  target: document.body\n});\n\nexport default app;\n      '},"/public/index.html":{code:'<!DOCTYPE html>\n<html>\n  <head>\n    <meta charset="utf8" />\n    <meta name="viewport" content="width=device-width" />\n\n    <title>Svelte app</title>\n\n    <link rel="stylesheet" href="public/bundle.css" />\n  </head>\n\n  <body>\n    <script src="bundle.js"></script>\n  </body>\n</html>'},"/package.json":{code:JSON.stringify({dependencies:{svelte:"^3.0.0"},main:"/index.js"})}}),main:"/App.svelte",environment:"svelte"},eP={files:{"tsconfig.json":{code:'{\n  "include": [\n    "./**/*"\n  ],\n  "compilerOptions": {\n    "strict": true,\n    "esModuleInterop": true,\n    "lib": [ "dom", "es2015" ],\n    "jsx": "react-jsx"\n  }\n}'},"/add.ts":{code:"export const add = (a: number, b: number): number => a + b;"},"/add.test.ts":{code:"import { add } from './add';\n\ndescribe('add', () => {\n  test('Commutative Law of Addition', () => {\n    expect(add(1, 2)).toBe(add(2, 1));\n  });\n});"},"package.json":{code:JSON.stringify({dependencies:{},devDependencies:{typescript:"^4.0.0"},main:"/add.ts"})}},main:"/add.test.ts",environment:"parcel",mode:"tests"},eB={files:z(z({},eS),{"/index.js":{code:'import "./styles.css";\n\ndocument.getElementById("app").innerHTML = `\n<h1>Hello world</h1>\n`;\n'},"/index.html":{code:'<!DOCTYPE html>\n<html>\n\n<head>\n  <title>Parcel Sandbox</title>\n  <meta charset="UTF-8" />\n</head>\n\n<body>\n  <div id="app"></div>\n\n  <script src="index.js">\n  </script>\n</body>\n\n</html>'},"/package.json":{code:JSON.stringify({dependencies:{},main:"/index.js"})}}),main:"/index.js",environment:"parcel"},ez={angular:eA,react:eT,"react-ts":eD,solid:eI,svelte:eH,"test-ts":eP,"vanilla-ts":{files:z(z({},eS),{"tsconfig.json":{code:'{\n  "compilerOptions": {\n    "strict": true,\n    "module": "commonjs",\n    "jsx": "preserve",\n    "esModuleInterop": true,\n    "sourceMap": true,\n    "allowJs": true,\n    "lib": [\n      "es6",\n      "dom"\n    ],\n    "rootDir": "src",\n    "moduleResolution": "node"\n  }\n}'},"/index.ts":{code:'import "./styles.css";\n\ndocument.getElementById("app").innerHTML = `\n<h1>Hello world</h1>\n`;\n'},"/index.html":{code:'<!DOCTYPE html>\n<html>\n\n<head>\n  <title>Parcel Sandbox</title>\n  <meta charset="UTF-8" />\n</head>\n\n<body>\n  <div id="app"></div>\n\n  <script src="index.ts">\n  </script>\n</body>\n\n</html>'},"/package.json":{code:JSON.stringify({dependencies:{},devDependencies:{typescript:"^4.0.0"},main:"/index.ts"})}}),main:"/index.ts",environment:"parcel"},vanilla:eB,vue:{files:{"/src/styles.css":eS["/styles.css"],"/src/App.vue":{code:"<template>\n  <h1>Hello {{ msg }}</h1>\n</template>\n\n<script setup>\nimport { ref } from 'vue';\nconst msg = ref('world');\n</script>"},"/src/main.js":{code:"import { createApp } from 'vue'\nimport App from './App.vue'\nimport \"./styles.css\";\n\ncreateApp(App).mount('#app')\n"},"/public/index.html":{code:'<!DOCTYPE html>\n<html lang="en">\n  <head>\n    <meta charset="utf-8" />\n    <meta http-equiv="X-UA-Compatible" content="IE=edge" />\n    <meta name="viewport" content="width=device-width,initial-scale=1.0" />\n    <title>codesandbox</title>\n  </head>\n  <body>\n    <noscript>\n      <strong\n        >We\'re sorry but codesandbox doesn\'t work properly without JavaScript\n        enabled. Please enable it to continue.</strong\n      >\n    </noscript>\n    <div id="app"></div>\n    <!-- built files will be auto injected -->\n  </body>\n</html>\n'},"/package.json":{code:JSON.stringify({name:"vue3",version:"0.1.0",private:!0,main:"/src/main.js",scripts:{serve:"vue-cli-service serve",build:"vue-cli-service build"},dependencies:{"core-js":"^3.26.1",vue:"^3.2.45"},devDependencies:{"@vue/cli-plugin-babel":"^5.0.8","@vue/cli-service":"^5.0.8"}})}},main:"/src/App.vue",environment:"vue-cli"},"vue-ts":{files:{"/src/styles.css":eS["/styles.css"],"/src/App.vue":{code:"<template>\n  <h1>Hello {{ msg }}</h1>\n</template>\n\n<script setup lang=\"ts\">\nimport { ref } from 'vue';\nconst msg = ref<string>('world');\n</script>"},"/src/main.ts":{code:"import { createApp } from 'vue'\nimport App from './App.vue'\nimport \"./styles.css\";\n\ncreateApp(App).mount('#app')\n"},"/src/shims-vue.d.ts":'/* eslint-disable */\ndeclare module "*.vue" {\n  import type { DefineComponent } from "vue";\n  const component: DefineComponent<{}, {}, any>;\n  export default component;\n}',"/public/index.html":{code:'<!DOCTYPE html>\n<html lang="en">\n  <head>\n    <meta charset="utf-8" />\n    <meta http-equiv="X-UA-Compatible" content="IE=edge" />\n    <meta name="viewport" content="width=device-width,initial-scale=1.0" />\n    <title>codesandbox</title>\n  </head>\n  <body>\n    <noscript>\n      <strong\n        >We\'re sorry but codesandbox doesn\'t work properly without JavaScript\n        enabled. Please enable it to continue.</strong\n      >\n    </noscript>\n    <div id="app"></div>\n    <!-- built files will be auto injected -->\n  </body>\n</html>\n'},"/package.json":{code:JSON.stringify({name:"vue3-ts",version:"0.1.0",private:!0,main:"/src/main.ts",scripts:{serve:"vue-cli-service serve",build:"vue-cli-service build"},dependencies:{"core-js":"^3.26.1",vue:"^3.2.45"},devDependencies:{"@vue/cli-plugin-babel":"^5.0.8","@vue/cli-plugin-typescript":"^5.0.8","@vue/cli-service":"^5.0.8",typescript:"^4.9.3"}})},"/tsconfig.json":{code:JSON.stringify({compilerOptions:{target:"esnext",module:"esnext",strict:!0,jsx:"preserve",moduleResolution:"node",experimentalDecorators:!0,skipLibCheck:!0,esModuleInterop:!0,allowSyntheticDefaultImports:!0,forceConsistentCasingInFileNames:!0,useDefineForClassFields:!0,sourceMap:!1,baseUrl:".",types:["webpack-env"],paths:{"@/*":["src/*"]},lib:["esnext","dom","dom.iterable","scripthost"]},include:["src/**/*.ts","src/**/*.tsx","src/**/*.vue","tests/**/*.ts","tests/**/*.tsx"],exclude:["node_modules"]})}},main:"/src/App.vue",environment:"vue-cli"},node:eR,nextjs:eO,vite:eM,"vite-react":eL,"vite-vue":eF,"vite-svelte":ej,astro:eN},eJ=function(e){var t,n,r,o,a,i,s=(0,C.AH)(e.files),l=e_({template:e.template,customSetup:e.customSetup,files:s}),c=(0,C.AH)(null!==(n=null===(t=e.options)||void 0===t?void 0:t.visibleFiles)&&void 0!==n?n:[]),u=(null===(r=e.options)||void 0===r?void 0:r.activeFile)?eU(null===(o=e.options)||void 0===o?void 0:o.activeFile,l.files):void 0;0===c.length&&s&&Object.keys(s).forEach(function(e){var t=s[e];if("string"==typeof t){c.push(e);return}!u&&t.active&&(u=e,!0===t.hidden&&c.push(e)),t.hidden||c.push(e)}),0===c.length&&(c=[l.main]),l.entry&&!l.files[l.entry]&&(l.entry=eU(l.entry,l.files)),!u&&l.main&&(u=l.main),u&&l.files[u]||(u=c[0]),c.includes(u)||c.push(u);var d=(0,C.V0)(l.files,null!==(a=l.dependencies)&&void 0!==a?a:{},null!==(i=l.devDependencies)&&void 0!==i?i:{},l.entry);return{visibleFiles:c.filter(function(e){return d[e]}),activeFile:u,files:d,environment:l.environment,shouldUpdatePreview:!0}},eU=function(e,t){var n=(0,C.AH)(t),r=(0,C.AH)(e);if(r in n)return r;if(!e)return null;for(var o=null,a=0,i=[".js",".jsx",".ts",".tsx"];!o&&a<i.length;){var s=""+r.split(".")[0]+i[a];void 0!==n[s]&&(o=s),a++}return o},e_=function(e){var t=e.files,n=e.template,r=e.customSetup;if(!n){if(!r){var o=ez.vanilla;return z(z({},o),{files:z(z({},o.files),eW(t))})}if(!t||0===Object.keys(t).length)throw Error("[sandpack-react]: without a template, you must pass at least one file");return z(z({},r),{files:eW(t)})}var a=ez[n];if(!a)throw Error('[sandpack-react]: invalid template "'+n+'" provided');return r||t?{files:eW(z(z({},a.files),t)),dependencies:z(z({},a.dependencies),null==r?void 0:r.dependencies),devDependencies:z(z({},a.devDependencies),null==r?void 0:r.devDependencies),entry:(0,C.AH)(null==r?void 0:r.entry),main:a.main,environment:(null==r?void 0:r.environment)||a.environment}:a},eW=function(e){return e?Object.keys(e).reduce(function(t,n){return"string"==typeof e[n]?t[n]={code:e[n]}:t[n]=e[n],t},{}):{}},eZ=function(e,t){var n=(0,y.useState)({editorState:"pristine"}),r=n[0],o=n[1],a=eJ(e),i=x()(a.files,t)?"pristine":"dirty";return i!==r.editorState&&o(function(e){return z(z({},e),{editorState:i})}),r},eV=function(e,t){var n,r,o,a,i,s,l,c,u,d,p,m,f,v,h,g,b,E=(null===(n=e.options)||void 0===n?void 0:n.initMode)||"lazy",w=(0,y.useState)({startRoute:null===(r=e.options)||void 0===r?void 0:r.startRoute,bundlerState:void 0,error:null,initMode:E,reactDevTools:void 0,status:null===(a=null===(o=e.options)||void 0===o?void 0:o.autorun)||void 0===a||a?"initial":"idle"}),$=w[0],x=w[1],k=(0,y.useRef)(null),S=(0,y.useRef)(null),N=(0,y.useRef)(null),O=(0,y.useRef)({}),R=(0,y.useRef)({}),M=(0,y.useRef)(null),L=(0,y.useRef)({}),j=(0,y.useRef)(),F=(0,y.useRef)({global:{}}),A=(0,y.useRef)(),T=(0,y.useRef)(!0),D=(0,y.useRef)(!0),I=(0,y.useRef)(t.environment),H=(0,y.useCallback)(function(n,r){return U(void 0,void 0,void 0,function(){var o,a,i,s,l,c,u,d,p,m,f,v,h;return _(this,function(g){switch(g.label){case 0:return o=null!==(s=null===(i=e.options)||void 0===i?void 0:i.bundlerTimeOut)&&void 0!==s?s:3e4,M.current&&clearTimeout(M.current),M.current=setTimeout(function(){x(function(e){return z(z({},e),{status:"timeout"})})},o),[4,(0,C.sF)(n,{files:t.files,template:t.environment},{externalResources:null===(l=e.options)||void 0===l?void 0:l.externalResources,bundlerURL:null===(c=e.options)||void 0===c?void 0:c.bundlerURL,startRoute:null===(u=e.options)||void 0===u?void 0:u.startRoute,fileResolver:null===(d=e.options)||void 0===d?void 0:d.fileResolver,skipEval:null!==(m=null===(p=e.options)||void 0===p?void 0:p.skipEval)&&void 0!==m&&m,logLevel:null===(f=e.options)||void 0===f?void 0:f.logLevel,showOpenInCodeSandbox:!1,showErrorScreen:D.current,showLoadingScreen:T.current,reactDevTools:$.reactDevTools,customNpmRegistries:null===(h=null===(v=e.customSetup)||void 0===v?void 0:v.npmRegistries)||void 0===h?void 0:h.map(function(e){var t;return null!==(t=z(z({},e),{proxyEnabled:!1}))&&void 0!==t?t:[]})})];case 1:return a=g.sent(),"function"!=typeof j.current&&(j.current=a.listen(V)),L.current[r]=L.current[r]||{},F.current[r]&&(Object.keys(F.current[r]).forEach(function(e){var t=F.current[r][e],n=a.listen(t);L.current[r][e]=n}),F.current[r]={}),Object.entries(F.current.global).forEach(function(e){var t=e[0],n=e[1],o=a.listen(n);L.current[r][t]=o}),[2,a]}})})},[t.environment,t.files,null===(i=e.customSetup)||void 0===i?void 0:i.npmRegistries,null===(s=e.options)||void 0===s?void 0:s.bundlerURL,null===(l=e.options)||void 0===l?void 0:l.externalResources,null===(c=e.options)||void 0===c?void 0:c.fileResolver,null===(u=e.options)||void 0===u?void 0:u.logLevel,null===(d=e.options)||void 0===d?void 0:d.skipEval,null===(p=e.options)||void 0===p?void 0:p.startRoute,$.reactDevTools]),P=(0,y.useCallback)(function(){Object.keys(R.current).map(Z),"function"==typeof j.current&&(j.current(),j.current=void 0)},[]),B=(0,y.useCallback)(function(){return U(void 0,void 0,void 0,function(){return _(this,function(e){switch(e.label){case 0:return[4,Promise.all(Object.keys(O.current).map(function(e){return U(void 0,void 0,void 0,function(){var t,n,r;return _(this,function(o){switch(o.label){case 0:return t=O.current[e],n=R.current,r=e,[4,H(t,e)];case 1:return n[r]=o.sent(),[2]}})})}))];case 1:return e.sent(),x(function(e){return z(z({},e),{status:"running"})}),[2]}})})},[H]),J=(0,y.useCallback)(function(){if(null===(n=null===(t=e.options)||void 0===t?void 0:t.autorun)||void 0===n||n){var t,n,r,o,a,i=null!==(o=null===(r=e.options)||void 0===r?void 0:r.initModeObserverOptions)&&void 0!==o?o:{rootMargin:"1000px 0px"};k.current&&S.current&&(null===(a=k.current)||void 0===a||a.unobserve(S.current)),S.current&&"lazy"===$.initMode?(k.current=new IntersectionObserver(function(e){var t;e.some(function(e){return e.isIntersecting})&&(N.current=setTimeout(function(){B()},50),S.current&&(null===(t=k.current)||void 0===t||t.unobserve(S.current)))},i),k.current.observe(S.current)):S.current&&"user-visible"===$.initMode?(k.current=new IntersectionObserver(function(e){e.some(function(e){return e.isIntersecting})?N.current=setTimeout(function(){B()},50):(N.current&&clearTimeout(N.current),Object.keys(R.current).map(Z),P())},i),k.current.observe(S.current)):N.current=setTimeout(function(){return B()},50)}},[null===(m=e.options)||void 0===m?void 0:m.autorun,null===(f=e.options)||void 0===f?void 0:f.initModeObserverOptions,B,$.initMode,P]),W=function(e,t){return U(void 0,void 0,void 0,function(){var n,r;return _(this,function(o){switch(o.label){case 0:if("running"!==$.status)return[3,2];return n=R.current,r=t,[4,H(e,t)];case 1:return n[r]=o.sent(),[3,3];case 2:O.current[t]=e,o.label=3;case 3:return[2]}})})},Z=function(e){var t,n=R.current[e];n?(n.destroy(),null===(t=n.iframe.contentWindow)||void 0===t||t.location.replace("about:blank"),n.iframe.removeAttribute("src"),delete R.current[e]):delete O.current[e],M.current&&clearTimeout(M.current),Object.values(L.current[e]).forEach(function(e){Object.values(e).forEach(function(e){return e()})});var r=Object.keys(R.current).length>0?"running":"idle";x(function(e){return z(z({},e),{status:r})})},V=function(e){M.current&&clearTimeout(M.current),"state"===e.type?x(function(t){return z(z({},t),{bundlerState:e.state})}):"done"!==e.type||e.compilatonError?"action"===e.type&&"show-error"===e.action?x(function(t){return z(z({},t),{error:(0,C.pp)(e)})}):"action"===e.type&&"notification"===e.action&&"error"===e.notificationType&&x(function(t){return z(z({},t),{error:{message:e.title}})}):x(function(e){return z(z({},e),{error:null})})},Y=null!==(h=null===(v=e.options)||void 0===v?void 0:v.recompileMode)&&void 0!==h?h:"delayed",G=null!==(b=null===(g=e.options)||void 0===g?void 0:g.recompileDelay)&&void 0!==b?b:500,q=(0,y.useCallback)(function(){"running"===$.status&&t.shouldUpdatePreview&&(I.current!==t.environment&&(I.current=t.environment,Object.entries(R.current).forEach(function(e){var t=e[0];W(e[1].iframe,t)})),"immediate"===Y&&Object.values(R.current).forEach(function(e){e.updateSandbox({files:t.files,template:t.environment})}),"delayed"===Y)&&"undefined"!=typeof window&&(window.clearTimeout(A.current),A.current=window.setTimeout(function(){Object.values(R.current).forEach(function(e){e.updateSandbox({files:t.files,template:t.environment})})},G))},[t.shouldUpdatePreview,t.files,t.environment,Y,G,$.status,H]);return(0,y.useEffect)(function(){q()},[t.files,t.environment,q]),(0,y.useEffect)(function(){E!==$.initMode&&(x(function(e){return z(z({},e),{initMode:E})}),J())},[E,J,$.initMode]),(0,y.useEffect)(function(){return function(){"function"==typeof j.current&&j.current(),M.current&&clearTimeout(M.current),A.current&&clearTimeout(A.current),N.current&&clearTimeout(N.current),k.current&&k.current.disconnect()}},[]),[$,{clients:R.current,initializeSandpackIframe:J,runSandpack:B,registerBundler:W,unregisterBundler:Z,registerReactDevTools:function(e){x(function(t){return z(z({},t),{reactDevTools:e})})},addListener:function(e,t){if(t){if(R.current[t]){var n=R.current[t].listen(e);return n}var r=ep();F.current[t]=F.current[t]||{},L.current[t]=L.current[t]||{},F.current[t][r]=e;var n=function(){F.current[t][r]?delete F.current[t][r]:L.current[t][r]&&(L.current[t][r](),delete L.current[t][r])};return n}var o=ep();F.current.global[o]=e;var a=Object.values(R.current).map(function(t){return t.listen(e)}),n=function(){a.forEach(function(e){return e()}),delete F.current.global[o],Object.values(L.current).forEach(function(e){var t;null===(t=null==e?void 0:e[o])||void 0===t||t.call(e)})};return n},dispatchMessage:function(e,t){if("running"!==$.status){console.warn("[sandpack-react]: dispatch cannot be called while in idle mode");return}t?R.current[t].dispatch(e):Object.values(R.current).forEach(function(t){t.dispatch(e)})},loadingScreenRegisteredRef:T,errorScreenRegisteredRef:D,lazyAnchorRef:S,unsubscribeClientListenersRef:L,queuedListenersRef:F}]},eY=function(e){var t=eJ(e),n=(0,y.useRef)(t),r=(0,y.useState)(t),o=r[0],a=r[1];x()(n.current,t)||(a(t),n.current=t);var i=function(e,t,n){void 0===n&&(n=!0),a(function(r){var o,a=r.files;return"string"==typeof e&&"string"==typeof t?a=z(z({},a),((o={})[e]={code:t},o)):"object"==typeof e&&(a=z(z({},a),eW(e))),z(z({},r),{files:(0,C.AH)(a),shouldUpdatePreview:n})})};return[z(z({},o),{visibleFilesFromProps:t.visibleFiles}),{openFile:function(e){a(function(t){var n=t.visibleFiles,r=J(t,["visibleFiles"]),o=n.includes(e)?n:W(W([],n,!0),[e],!1);return z(z({},r),{activeFile:e,visibleFiles:o})})},resetFile:function(e){a(function(n){var r;return z(z({},n),{files:z(z({},n.files),((r={})[e]=t.files[e],r))})})},resetAllFiles:function(){a(function(e){return z(z({},e),{files:t.files})})},setActiveFile:function(e){o.files[e]&&a(function(t){return z(z({},t),{activeFile:e})})},updateCurrentFile:function(e){i(o.activeFile,e)},updateFile:i,addFile:i,closeFile:function(e){1!==o.visibleFiles.length&&a(function(t){var n=t.visibleFiles,r=t.activeFile,o=J(t,["visibleFiles","activeFile"]),a=n.indexOf(e),i=n.filter(function(t){return t!==e});return z(z({},o),{activeFile:e===r?0===a?n[1]:n[a-1]:r,visibleFiles:i})})},deleteFile:function(e,t){void 0===t&&(t=!0),a(function(n){var r=n.visibleFiles,o=n.files,a=n.activeFile,i=J(n,["visibleFiles","files","activeFile"]),s=z({},o);delete s[e];var l=r.filter(function(t){return t!==e});if(0===l.length){var c=Object.keys(o)[Object.keys(o).length-1];return z(z({},i),{visibleFiles:[c],activeFile:c,files:s,shouldUpdatePreview:t})}return z(z({},i),{visibleFiles:l,activeFile:e===a?l[l.length-1]:a,files:s,shouldUpdatePreview:t})})}}]},eG=y.createContext(null),eq=function(e){var t=e.children,n=e.options,r=e.style,o=e.className,a=e.theme,i=eY(e),s=i[0],l=i[1],c=eV(e,s),u=c[0],d=c[1],p=d.dispatchMessage,m=d.addListener,f=J(d,["dispatchMessage","addListener"]),v=eZ(e,s.files);return y.useEffect(function(){f.initializeSandpackIframe()},[]),y.createElement(eG.Provider,{value:z(z(z(z(z(z({},s),u),v),l),f),{listen:m,dispatch:p})},y.createElement(E.P,{classes:null==n?void 0:n.classes},y.createElement(ek,{className:o,style:r,theme:a},t)))};function eX(){var e=y.useContext(eG);if(null===e)throw Error('[sandpack-react]: "useSandpack" must be wrapped by a "SandpackProvider"');var t=e.dispatch,n=e.listen;return{sandpack:z({},J(e,["dispatch","listen"])),dispatch:t,listen:n}}eG.Consumer;var eK=function(){var e,t,n,r=eX().sandpack;return{code:null===(e=r.files[r.activeFile])||void 0===e?void 0:e.code,readOnly:null!==(n=null===(t=r.files[r.activeFile])||void 0===t?void 0:t.readOnly)&&void 0!==n&&n,updateCode:r.updateCurrentFile}},eQ=eg({svg:{margin:"auto"}}),e0=eg(((i={appearance:"none",outline:"none",display:"flex",alignItems:"center",fontSize:"inherit",fontFamily:"inherit",backgroundColor:"transparent",transition:"color $default, background $default",cursor:"pointer",color:"$colors$clickable",border:0,"&:disabled":{color:"$colors$disabled"},"&:hover:not(:disabled,[data-active='true'])":{color:"$colors$hover"},'&[data-active="true"]':{color:"$colors$accent"},svg:{minWidth:"$space$4",width:"$space$4",height:"$space$4"}})["&."+eQ]={padding:"$space$1",height:"$space$7",display:"flex"},i["&."+eQ+"&:not(:has(svg + span))"]={width:"$space$7"},i["&."+eQ+"&:has(svg + span)"]={paddingRight:"$space$3"},i)),e1=eg({backgroundColor:"$colors$surface2",borderRadius:"99999px",border:"1px solid $colors$surface3",'&[data-active="true"]':{color:"$colors$surface1",background:"$colors$accent"},"&:hover:not(:disabled,[data-active='true'])":{backgroundColor:"$colors$surface3"}}),e3=eg({padding:0}),e6=eb({"0%":{opacity:0},"100%":{opacity:1}}),e2=eg({position:"absolute",bottom:"0",left:"0",right:"0",top:"0",margin:"0",overflow:"auto",height:"100%",zIndex:"$top"}),e5=eg({padding:"$space$4",whiteSpace:"pre-wrap",fontFamily:"$font$mono",backgroundColor:"$colors$errorSurface"}),e4=eg(((s={padding:"$space$10",backgroundColor:"$colors$surface1"})["."+e0]={marginTop:"$space$6",width:"auto",gap:"$space$2",padding:"0 $space$3 0 $space$2"},s)),e7=eg({animation:e6+" 150ms ease",color:"$colors$error",display:"flex",flexDirection:"column",gap:"$space$3",a:{color:"inherit"},p:{margin:0}}),e8=eg({borderBottom:"1px solid $colors$surface2",background:"$colors$surface1"}),e9=eg({padding:"0 $space$2",overflow:"auto",display:"flex",flexWrap:"nowrap",alignItems:"stretch",minHeight:"40px",marginBottom:"-1px"}),te=eg({padding:"0 $space$1 0 $space$1",borderRadius:"$border$radius",marginLeft:"$space$1",width:"$space$5",visibility:"hidden",svg:{width:"$space$3",height:"$space$3",display:"block",position:"relative",top:1}}),tt=eg(((l={padding:"0 $space$2",height:"$layout$headerHeight",whiteSpace:"nowrap","&:focus":{outline:"none"}})["&:hover > ."+te]={visibility:"unset"},l)),tn=function(e){var t=e.closableTabs,n=e.className,r=J(e,["closableTabs","className"]),o=eX().sandpack,a=(0,E.E)("sp"),i=o.activeFile,s=o.visibleFiles,l=o.setActiveFile,c=function(e){e.stopPropagation();var t=e.target.closest("[data-active]"),n=null==t?void 0:t.getAttribute("title");n&&o.closeFile(n)},u=function(e){var t=ec(e),n=s.reduce(function(n,r){return r===e||ec(r)===t&&n.push(r),n},[]);return 0===n.length?t:eu(e,n)};return y.createElement("div",z({className:el(a("tabs"),e8,n),translate:"no"},r),y.createElement("div",{"aria-label":"Select active file",className:el(a("tabs-scrollable-container"),e9),role:"tablist"},s.map(function(e){return y.createElement("button",{key:e,"aria-selected":e===i,className:el(a("tab-button"),e0,tt),"data-active":e===i,onClick:function(){return l(e)},role:"tab",title:e,type:"button"},u(e),t&&s.length>1&&y.createElement("span",{className:el(a("close-button"),te),onClick:c},y.createElement(er,null)))})))},tr=function(e){var t=e.onClick,n=e.className,r=e.children,o=(0,E.E)("sp");return y.createElement("button",{className:el(o("button","icon-standalone"),e0,eQ,e1,n),onClick:t,type:"button"},r)},to=eg({position:"absolute",bottom:"$space$2",right:"$space$2",paddingRight:"$space$3"}),ta=function(e){e.className;var t=e.onClick,n=J(e,["className","onClick"]),r=eX().sandpack;return y.createElement(tr,z({className:to.toString(),onClick:function(e){r.runSandpack(),null==t||t(e)}},n),y.createElement(Y,null),y.createElement("span",null,"Run"))},ti=eg(((c={display:"flex",flexDirection:"column",width:"100%",position:"relative",backgroundColor:"$colors$surface1",gap:1})["&:has(.sp-stack)"]={backgroundColor:"$colors$surface2"},c)),ts=function(e){var t=e.className,n=J(e,["className"]),r=(0,E.E)("sp");return y.createElement("div",z({className:el(r("stack"),ti,t)},n))},tl=function(){var e=y.useContext(eC);return{theme:e.theme,themeId:e.id,themeMode:e.mode}},tc=function(e,t){if(e.length!==t.length)return!1;for(var n=!0,r=0;r<e.length;r++)if(e[r]!==t[r]){n=!1;break}return n},tu=function(e,t){var n=t.line,r=t.column;return e.line(n).from+(null!=r?r:0)-1},td=function(e){return"sp-syntax-"+e},tp=function(e,t,n){if(!e&&!t)return"javascript";var r=t;if(!r&&e){var o=e.lastIndexOf(".");r=e.slice(o+1)}for(var a=0;a<n.length;a++){var i=n[a];if(r===i.name||i.extensions.includes(r||""))return i.name}switch(r){case"ts":case"tsx":return"typescript";case"html":case"svelte":case"vue":case"astro":return"html";case"css":case"less":case"scss":return"css";default:return"javascript"}},tm=function(e,t){for(var n={javascript:(0,F.eJ)({jsx:!0,typescript:!1}),typescript:(0,F.eJ)({jsx:!0,typescript:!0}),html:(0,j.dy)(),css:(0,L.iv)()},r=0;r<t.length;r++){var o=t[r];if(e===o.name)return o.language}return n[e]},tf=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return y.useCallback(function(t){return e.forEach(function(e){if(e){if("function"==typeof e)return e(t);e.current=t}})},e)},tv=R.p.line({attributes:{class:"cm-errorLine"}}),th=R.lg.fromClass(function(){function e(){this.decorations=R.p.none}return e.prototype.update=function(e){var t=this;e.transactions.forEach(function(n){var r=n.annotation("show-error");if(void 0!==r){var o=tu(e.view.state.doc,{line:r})+1;t.decorations=R.p.set([tv.range(o)])}else n.annotation("remove-errors")&&(t.decorations=R.p.none)})},e}(),{decorations:function(e){return e.decorations}}),tg=eg({margin:"0",display:"block",fontFamily:"$font$mono",fontSize:"$font$size",color:"$syntax$color$plain",lineHeight:"$font$lineHeight"}),tb=eg(["string","plain","comment","keyword","definition","punctuation","property","tag","static"].reduce(function(e,t){var n;return z(z({},e),((n={})["."+td(t)]={color:"$syntax$color$"+t,fontStyle:"$syntax$fontStyle$"+t},n))},{})),ty=eg(((u={flex:1,position:"relative",overflow:"auto",background:"$colors$surface1",".cm-scroller":{padding:"$space$4 0"}})["."+tg]={padding:"$space$4 0"},u["@media screen and (max-width: 768px)"]={"@supports (-webkit-overflow-scrolling: touch)":{".cm-content":{fontSize:"16px"}}},u)),tE=eg({margin:"0",outline:"none",height:"100%"}),tw=eg(((d={fontFamily:"$font$mono",fontSize:"0.8em",position:"absolute",right:"$space$2",bottom:"$space$2",zIndex:"$top",color:"$colors$clickable",backgroundColor:"$colors$surface2",borderRadius:"99999px",padding:"calc($space$1 / 2) $space$2"})["& + ."+e0]={right:"calc($space$11 * 2)"},d)),t$=function(e){var t=e.langSupport,n=e.highlightTheme,r=e.code,o=void 0===r?"":r,a=t.language.parser.parse(o),i=0,s=[],l=function(e,t){if(e>i){var n=o.slice(i,e);s.push(t?(0,y.createElement)("span",{children:n,className:t,key:""+e+i}):n),i=e}};return(0,A.bW)(a,n,function(e,t,n){l(e,""),l(t,n)}),i<o.length&&(null==o?void 0:o.includes("\n"))&&s.push("\n\n"),s},tx=y.forwardRef(function(e,t){var n=e.code,r=void 0===n?"":n,o=e.filePath,a=e.fileType,i=e.onCodeUpdate,s=e.showLineNumbers,l=void 0!==s&&s,c=e.showInlineErrors,u=void 0!==c&&c,d=e.wrapContent,p=void 0!==d&&d,m=e.editorState,f=void 0===m?"pristine":m,v=e.readOnly,h=void 0!==v&&v,g=e.showReadOnly,b=e.decorators,w=e.initMode,$=void 0===w?"lazy":w,x=e.extensions,C=void 0===x?[]:x,L=e.extensionsKeymap,j=void 0===L?[]:L,F=e.additionalLanguages,T=void 0===F?[]:F,D=y.useRef(null),I=tf(D,t),H=y.useRef(),P=tl(),B=P.theme,J=P.themeId,U=y.useState(r),_=U[0],Z=U[1],V=y.useState("immediate"===$),Y=V[0],G=V[1],q=(0,E.E)("sp"),X=eX().listen,K=y.useRef([]),Q=y.useRef([]),ee=(0,M.Z)(D,{rootMargin:"600px 0px",threshold:.2}).isIntersecting;y.useImperativeHandle(t,function(){return{getCodemirror:function(){return H.current}}}),y.useEffect(function(){("lazy"===$||"user-visible"===$)&&ee&&G(!0)},[$,ee]);var et=tp(o,a,T),en=tm(et,T),er=N.Qf.define([{tag:A.pJ.link,textDecoration:"underline"},{tag:A.pJ.emphasis,fontStyle:"italic"},{tag:A.pJ.strong,fontWeight:"bold"},{tag:A.pJ.keyword,class:td("keyword")},{tag:[A.pJ.atom,A.pJ.number,A.pJ.bool],class:td("static")},{tag:A.pJ.variableName,class:td("plain")},{tag:A.pJ.standard(A.pJ.tagName),class:td("tag")},{tag:[A.pJ.function(A.pJ.variableName),A.pJ.definition(A.pJ.function(A.pJ.variableName)),A.pJ.tagName],class:td("definition")},{tag:A.pJ.propertyName,class:td("property")},{tag:[A.pJ.literal,A.pJ.inserted],class:td(B.syntax.string?"string":"static")},{tag:A.pJ.punctuation,class:td("punctuation")},{tag:[A.pJ.comment,A.pJ.quote],class:td("comment")}]),eo=t$({langSupport:en,highlightTheme:er,code:r}),ea=y.useMemo(function(){return b?b.sort(function(e,t){return e.line-t.line}):b},[b]);y.useEffect(function(){if(D.current&&Y){var e=[{key:"Tab",run:function(e){(0,S.at)(e);var t,n,r=j.find(function(e){return"Tab"===e.key});return null===(n=null===(t=null==r?void 0:r.run)||void 0===t?void 0:t.call(r,e))||void 0===n||n}},{key:"Shift-Tab",run:function(e){var t,n,r=e.state,o=e.dispatch;(0,S.xi)({state:r,dispatch:o});var a=j.find(function(e){return"Shift-Tab"===e.key});return null===(n=null===(t=null==a?void 0:a.run)||void 0===t?void 0:t.call(a,s))||void 0===n||n}},{key:"Escape",run:function(){return!!h||(D.current&&D.current.focus(),!0)}},{key:"mod-Backspace",run:S.fE}],t=W(W([(0,R.AE)(),(0,S.m8)(),(0,k.vQ)()],C,!0),[R.$f.of(W(W(W(W(W([],k.GA,!0),S.wQ,!0),S.f$,!0),e,!0),j,!0)),en,R.tk.theme({"&":{backgroundColor:"var(--sp-colors-surface1)",color:"var(--sp-syntax-color-plain)",height:"100%"},".cm-matchingBracket, .cm-nonmatchingBracket, &.cm-focused .cm-matchingBracket, &.cm-focused .cm-nonmatchingBracket":{color:"inherit",backgroundColor:"rgba(128,128,128,.25)",backgroundBlendMode:"difference"},"&.cm-editor.cm-focused":{outline:"none"},".cm-activeLine":{backgroundColor:"var(--sp-colors-surface3)",borderRadius:"var(--sp-border-radius)"},".cm-errorLine":{backgroundColor:"var(--sp-colors-errorSurface)",borderRadius:"var(--sp-border-radius)"},".cm-content":{caretColor:"var(--sp-colors-accent)",padding:"0 var(--sp-space-4)"},".cm-scroller":{fontFamily:"var(--sp-font-mono)",lineHeight:"var(--sp-font-lineHeight)"},".cm-gutters":{backgroundColor:"var(--sp-colors-surface1)",color:"var(--sp-colors-disabled)",border:"none",paddingLeft:"var(--sp-space-1)"},".cm-gutter.cm-lineNumbers":{fontSize:".6em"},".cm-lineNumbers .cm-gutterElement":{lineHeight:"var(--sp-font-lineHeight)",minWidth:"var(--sp-space-5)"},".cm-content .cm-line":{paddingLeft:"var(--sp-space-1)"},".cm-content.cm-readonly .cm-line":{paddingLeft:0}}),(0,N.nF)(er)],!1);h?(t.push(O.yy.readOnly.of(!0)),t.push(R.tk.editable.of(!1))):(t.push((0,N.n$)()),t.push((0,R.ZO)())),ea&&t.push(R.lg.fromClass(function(){function e(e){this.decorations=this.getDecoration(e)}return e.prototype.update=function(e){},e.prototype.getDecoration=function(e){if(!ea)return R.p.none;var t=ea.map(function(t){var n,r,o,a=R.p.line({attributes:{class:null!==(n=t.className)&&void 0!==n?n:""}}),i=R.p.mark({class:null!==(r=t.className)&&void 0!==r?r:"",attributes:null!==(o=t.elementAttributes)&&void 0!==o?o:void 0}),s=tu(e.state.doc,{line:t.line,column:t.startColumn})+1;if(t.startColumn&&t.endColumn){var l=tu(e.state.doc,{line:t.line,column:t.endColumn})+1;return i.range(s,l)}return a.range(s)});return R.p.set(t)},e}(),{decorations:function(e){return e.decorations}})),p&&t.push(R.tk.lineWrapping),l&&t.push((0,R.Eu)()),u&&t.push(th);var n=D.current,a=n.querySelector(".sp-pre-placeholder");a&&n.removeChild(a);var s=new R.tk({doc:r,extensions:t,parent:n,dispatch:function(e){if(s.update([e]),e.docChanged){var t=e.newDoc.sliceString(0,e.newDoc.length);Z(t),null==i||i(t)}}});return s.contentDOM.setAttribute("data-gramm","false"),s.contentDOM.setAttribute("aria-label",o?"Code Editor for "+ec(o):"Code Editor"),h?s.contentDOM.classList.add("cm-readonly"):s.contentDOM.setAttribute("tabIndex","-1"),H.current=s,function(){var e;null===(e=H.current)||void 0===e||e.destroy()}}},[Y,l,p,J,ea,h]),y.useEffect(function(){var e=H.current,t=!tc(C,K.current)||!tc(j,Q.current);e&&t&&(e.dispatch({effects:O.Py.appendConfig.of(C)}),e.dispatch({effects:O.Py.appendConfig.of(R.$f.of(W([],j,!0)))}),K.current=C,Q.current=j)},[C,j]),y.useEffect(function(){H.current&&"dirty"===f&&window.matchMedia("(min-width: 768px)").matches&&H.current.contentDOM.focus()},[]),y.useEffect(function(){if(H.current&&"string"==typeof r&&r!==_){var e=H.current,t=e.state.selection.ranges.some(function(e){var t=e.to,n=e.from;return t>r.length||n>r.length})?O.jT.cursor(r.length):e.state.selection,n={from:0,to:e.state.doc.length,insert:r};e.dispatch({changes:n,selection:t})}},[r]),y.useEffect(function(){if(u){var e=X(function(e){var t=H.current;"success"===e.type?null==t||t.dispatch({annotations:[new O.q6("remove-errors",!0)]}):"action"===e.type&&"show-error"===e.action&&e.path===o&&e.line&&(null==t||t.dispatch({annotations:[new O.q6("show-error",e.line)]}))});return function(){return e()}}},[X,u]);var ei=function(){var e=4;return l&&(e+=6),h||(e+=1),"var(--sp-space-"+e+")"};return h?y.createElement(y.Fragment,null,y.createElement("pre",{ref:I,className:el(q("cm",f,et),tE,tb),translate:"no"},y.createElement("code",{className:el(q("pre-placeholder"),tg),style:{marginLeft:ei()}},eo)),h&&(void 0===g||g)&&y.createElement("span",z({className:el(q("read-only"),tw)},{}),"Read-only")):y.createElement("div",{ref:I,"aria-autocomplete":"list","aria-label":o?"Code Editor for "+ec(o):"Code Editor","aria-multiline":"true",className:el(q("cm",f,et),tE,tb),onKeyDown:function(e){"Enter"===e.key&&H.current&&(e.preventDefault(),H.current.contentDOM.focus())},role:"textbox",tabIndex:0,translate:"no",suppressHydrationWarning:!0},y.createElement("pre",{className:el(q("pre-placeholder"),tg),style:{marginLeft:ei()}},eo))}),tC=y.forwardRef(function(e,t){var n=e.showTabs,r=e.showLineNumbers,o=e.showInlineErrors,a=e.showRunButton,i=e.wrapContent,s=e.closableTabs,l=e.initMode,c=e.extensions,u=e.extensionsKeymap,d=e.readOnly,p=e.showReadOnly,m=e.additionalLanguages,f=J(e,["showTabs","showLineNumbers","showInlineErrors","showRunButton","wrapContent","closableTabs","initMode","extensions","extensionsKeymap","readOnly","showReadOnly","additionalLanguages"]),v=eX().sandpack,h=eK(),g=h.code,b=h.updateCode,w=h.readOnly,$=v.activeFile,x=v.status,C=v.editorState,k=null!=n?n:v.visibleFiles.length>1,S=(0,E.E)("sp");return y.createElement(ts,z({className:S("editor")},f),k&&y.createElement(tn,{closableTabs:void 0!==s&&s}),y.createElement("div",{className:el(S("code-editor"),ty)},y.createElement(tx,{key:$,ref:t,additionalLanguages:m,code:g,editorState:C,extensions:c,extensionsKeymap:u,filePath:$,initMode:l||v.initMode,onCodeUpdate:function(e){b(e)},readOnly:d||w,showInlineErrors:void 0!==o&&o,showLineNumbers:void 0!==r&&r,showReadOnly:p,wrapContent:void 0!==i&&i}),(void 0===a||a)&&"idle"===x?y.createElement(ta,null):null))});y.forwardRef(function(e,t){var n=e.showTabs,r=e.showLineNumbers,o=e.decorators,a=e.code,i=e.initMode,s=e.wrapContent,l=J(e,["showTabs","showLineNumbers","decorators","code","initMode","wrapContent"]),c=eX().sandpack,u=eK().code,d=(0,E.E)("sp"),p=null!=n?n:c.visibleFiles.length>1;return y.createElement(ts,z({className:d("editor-viewer")},l),p?y.createElement(tn,null):null,y.createElement("div",{className:el(d("code-editor"),ty)},y.createElement(tx,{ref:t,code:null!=a?a:u,decorators:o,filePath:c.activeFile,initMode:i||c.initMode,showLineNumbers:r,showReadOnly:!1,wrapContent:s,readOnly:!0})),"idle"===c.status?y.createElement(ta,null):null)});var tk=eg(((p={border:"1px solid $colors$surface2",display:"flex",flexWrap:"wrap",alignItems:"stretch",borderRadius:"$border$radius",overflow:"hidden",position:"relative",backgroundColor:"$colors$surface2",gap:1})["> ."+ti]={flexGrow:1,flexShrink:1,flexBasis:"0",height:"$layout$height",overflow:"hidden","@media print":{height:"auto",display:"block"},"@media screen and (max-width: 768px)":((m={})["&:not(.sp-preview, .sp-editor, .sp-preset-column)"]={height:"calc($layout$height / 2)"},m.minWidth="100%;",m)},p["> .sp-file-explorer"]={flex:.2,minWidth:200,"@media screen and (max-width: 768px)":{flex:1}},p)),tS=y.forwardRef(function(e,t){var n=e.children,r=e.className,o=J(e,["children","className"]),a=eX().sandpack,i=(0,E.E)("sp"),s=tf(a.lazyAnchorRef,t);return y.createElement("div",z({ref:s,className:el(i("layout"),tk,r)},o),n)}),tN=function(){var e,t=eX().sandpack,n=t.error;return y.useEffect(function(){t.errorScreenRegisteredRef.current=!0},[]),null!==(e=null==n?void 0:n.message)&&void 0!==e?e:null},tO=function(e){var t=e.replace("[sandpack-client]: ","");if(/process.exit/.test(t)){var n=t.match(/process.exit\((\d+)\)/);return n?0===Number(n[1])?"Server is not running, would you like to start it again?":"Server has crashed with status code "+n[1]+", would you like to restart the server?":t}return t},tR=function(e){var t=e.children,n=e.className,r=J(e,["children","className"]),o=tN(),a=tK().restart,i=(0,E.E)("sp");return o||t?(null==o?void 0:o.startsWith("[sandpack-client]"))&&o?y.createElement("div",z({className:el(i("overlay","error"),e2,e4,n)},r),y.createElement("div",{className:el(i("error-message"),e7)},y.createElement("p",{className:el(eg({fontWeight:"bold"}))},"Couldn't connect to server"),y.createElement("p",null,tO(o)),y.createElement("div",null,y.createElement("button",{className:el(i("button","icon-standalone"),e0,eQ,e1),onClick:a,title:"Restart script",type:"button"},y.createElement(V,null)," ",y.createElement("span",null,"Restart"))))):y.createElement("div",z({className:el(i("overlay","error"),e2,e5,n),translate:"no"},r),y.createElement("div",{className:el(i("error-message"),e7)},o||t)):null},tM=function(e,t){var n=eX(),r=n.sandpack,o=n.listen,a=y.useState("LOADING"),i=a[0],s=a[1];return(y.useEffect(function(){r.loadingScreenRegisteredRef.current=!0;var t=o(function(e){"start"===e.type&&!0===e.firstLoad&&s("LOADING"),"done"===e.type&&s(function(e){return"LOADING"===e?"PRE_FADING":"HIDDEN"})},e);return function(){t()}},[e,"idle"===r.status]),y.useEffect(function(){var e;return"PRE_FADING"!==i||t?"FADING"===i&&(e=setTimeout(function(){return s("HIDDEN")},200)):s("FADING"),function(){clearTimeout(e)}},[i,t]),"timeout"===r.status)?"TIMEOUT":"running"!==r.status?"HIDDEN":i},tL="https://codesandbox.io/api/v1/sandboxes/define",tj=function(e,t){var n,r=Object.keys(e).reduce(function(t,n){var r,o=n.replace("/",""),a={content:e[n].code,isBinary:!1};return z(z({},t),((r={})[o]=a,r))},{});return n=z({files:r},t?{template:t}:null),D().compressToBase64(JSON.stringify(n)).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")},tF=function(e){var t,n,r,o=e.children,a=J(e,["children"]),i=eX().sandpack,s=y.useRef(null),l=y.useState(),c=l[0],u=l[1];return(y.useEffect(function(){var e=setTimeout(function(){var e=tj(i.files,i.environment);u(new URLSearchParams({parameters:e,query:new URLSearchParams({file:i.activeFile,utm_medium:"sandpack"}).toString()}))},600);return function(){clearTimeout(e)}},[i.activeFile,i.environment,i.files]),(null!==(r=null===(n=null===(t=null==c?void 0:c.get)||void 0===t?void 0:t.call(c,"parameters"))||void 0===n?void 0:n.length)&&void 0!==r?r:0)>1500)?y.createElement("button",z({onClick:function(){var e;return null===(e=s.current)||void 0===e?void 0:e.submit()},title:"Open in CodeSandbox",type:"button"},a),y.createElement("form",{ref:s,action:tL,method:"POST",style:{visibility:"hidden"},target:"_blank"},y.createElement("input",{name:"environment",type:"hidden",value:"node"===i.environment?"server":i.environment}),Array.from(c,function(e){var t=e[0],n=e[1];return y.createElement("input",{key:t,name:t,type:"hidden",value:n})})),o):y.createElement("a",z({href:tL+"?"+(null==c?void 0:c.toString())+"&environment="+("node"===i.environment?"server":i.environment),rel:"noreferrer noopener",target:"_blank",title:"Open in CodeSandbox"},a),o)},tA=function(){var e=(0,E.E)("sp");return y.createElement(tF,{className:el(e("button","icon-standalone"),e0,eQ,e1)},y.createElement(Q,null))},tT=eg({transform:"translate(-4px, 9px) scale(0.13, 0.13)","*":{position:"absolute",width:"96px",height:"96px"}}),tD=eg(((f={position:"absolute",right:"$space$2",bottom:"$space$2",zIndex:"$top",width:"32px",height:"32px",borderRadius:"$border$radius"})["."+tT]={display:"flex"},f[".sp-button."+e0]={display:"none"},f["&:hover .sp-button."+e0]={display:"flex"},f["&:hover ."+tT]={display:"none"},f)),tI=eg({animation:eb({"0%":{transform:"rotateX(-25.5deg) rotateY(45deg)"},"100%":{transform:"rotateX(-25.5deg) rotateY(405deg)"}})+" 1s linear infinite",animationFillMode:"forwards",transformStyle:"preserve-3d",transform:"rotateX(-25.5deg) rotateY(45deg)","*":{border:"10px solid $colors$clickable",borderRadius:"8px",background:"$colors$surface1"},".top":{transform:"rotateX(90deg) translateZ(44px)",transformOrigin:"50% 50%"},".bottom":{transform:"rotateX(-90deg) translateZ(44px)",transformOrigin:"50% 50%"},".front":{transform:"rotateY(0deg) translateZ(44px)",transformOrigin:"50% 50%"},".back":{transform:"rotateY(-180deg) translateZ(44px)",transformOrigin:"50% 50%"},".left":{transform:"rotateY(-90deg) translateZ(44px)",transformOrigin:"50% 50%"},".right":{transform:"rotateY(90deg) translateZ(44px)",transformOrigin:"50% 50%"}}),tH=function(e){var t=e.className,n=e.showOpenInCodeSandbox,r=J(e,["className","showOpenInCodeSandbox"]),o=(0,E.E)("sp");return y.createElement("div",z({className:el(o("cube-wrapper"),tD,t),title:"Open in CodeSandbox"},r),n&&y.createElement(tA,null),y.createElement("div",{className:el(o("cube"),tT)},y.createElement("div",{className:el(o("sides"),tI)},y.createElement("div",{className:"top"}),y.createElement("div",{className:"right"}),y.createElement("div",{className:"bottom"}),y.createElement("div",{className:"left"}),y.createElement("div",{className:"front"}),y.createElement("div",{className:"back"}))))},tP=eg({backgroundColor:"$colors$surface1"}),tB=function(e){var t=e.clientId,n=e.loading,r=e.className,o=e.style,a=e.showOpenInCodeSandbox,i=J(e,["clientId","loading","className","style","showOpenInCodeSandbox"]),s=tM(t,n),l=(0,E.E)("sp"),c=eX().sandpack,u=c.runSandpack,d=c.environment;return"HIDDEN"===s?null:"TIMEOUT"===s?y.createElement("div",z({className:el(l("overlay","error"),e2,e4,r)},i),y.createElement("div",{className:el(l("error-message"),e7)},y.createElement("p",{className:el(eg({fontWeight:"bold"}))},"Couldn't connect to server"),y.createElement("p",null,"This means sandpack cannot connect to the runtime or your network is having some issues. Please check the network tab in your browser and try again. If the problem persists, report it via"," ",y.createElement("a",{href:"mailto:hello@codesandbox.io?subject=Sandpack Timeout Error"},"email")," ","or submit an issue on"," ",y.createElement("a",{href:"https://github.com/codesandbox/sandpack/issues",rel:"noreferrer noopener",target:"_blank"},"GitHub.")),y.createElement("pre",null,"ENV: ",d,y.createElement("br",null),"ERROR: TIME_OUT"),y.createElement("div",null,y.createElement("button",{className:el(l("button","icon-standalone"),e0,eQ,e1),onClick:u,title:"Restart script",type:"button"},y.createElement(V,null)," ",y.createElement("span",null,"Try again"))))):y.createElement("div",z({className:el(l("overlay","loading"),e2,tP,r),style:z(z({},o),{opacity:"LOADING"===s||"PRE_FADING"===s?1:0,transition:"opacity 200ms ease-out"})},i),y.createElement(tH,{showOpenInCodeSandbox:a}))},tz=eg({borderRadius:"0",width:"100%",padding:0,marginBottom:"$space$2",span:{textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"},svg:{marginRight:"$space$1"}}),tJ=function(e){var t=e.selectFile,n=e.path,r=e.active,o=e.onClick,a=e.depth,i=e.isDirOpen,s=useClasser("sp"),l=n.split("/").filter(Boolean).pop();return React.createElement("button",{className:el(s("button","explorer"),e0,tz),"data-active":r,onClick:function(e){t&&t(n),null==o||o(e)},style:{paddingLeft:18*a+"px"},title:l,type:"button"},t?React.createElement(en,null):i?React.createElement(ee,null):React.createElement(et,null),React.createElement("span",null,l))},tU=function(e){var t=e.prefixedPath,n=e.files,r=e.selectFile,o=e.activeFile,a=e.depth,i=e.autoHiddenFiles,s=e.visibleFiles,l=React.useState(!0),c=l[0],u=l[1];return React.createElement("div",{key:t},React.createElement(tJ,{depth:a,isDirOpen:c,onClick:function(){return u(function(e){return!e})},path:t+"/"}),c&&React.createElement(tW,{activeFile:o,autoHiddenFiles:i,depth:a+1,files:n,prefixedPath:t,selectFile:r,visibleFiles:s}))},t_=function(e){var t=e.autoHiddenFiles,n=e.visibleFiles,r=e.files,o=e.prefixedPath,a=n.length>0,i=t&&!a,s=t&&!!a,l=Object.keys(r).filter(function(e){var t,a=e.startsWith(o);return s?a&&n.includes(e):i?a&&!(null===(t=r[e])||void 0===t?void 0:t.hidden):a}).map(function(e){return e.substring(o.length)}),c=new Set(l.filter(function(e){return e.includes("/")}).map(function(e){return""+o+e.split("/")[0]+"/"})),u=l.filter(function(e){return!e.includes("/")}).map(function(e){return""+o+e});return{directories:Array.from(c),modules:u}},tW=function(e){var t=e.depth,n=void 0===t?0:t,r=e.activeFile,o=e.selectFile,a=e.prefixedPath,i=e.files,s=e.autoHiddenFiles,l=e.visibleFiles,c=t_({visibleFiles:l,autoHiddenFiles:s,prefixedPath:a,files:i}),u=c.directories,d=c.modules;return React.createElement("div",null,u.map(function(e){return React.createElement(tU,{key:e,activeFile:r,autoHiddenFiles:s,depth:n,files:i,prefixedPath:e,selectFile:o,visibleFiles:l})}),d.map(function(e){return React.createElement(tJ,{key:e,active:r===e,depth:n,path:e,selectFile:o})}))};eg({padding:"$space$3",overflow:"auto",height:"100%"});var tZ=function(e){var t=e.match(/(https?:\/\/.*?)\//);return t&&t[1]?[t[1],e.replace(t[1],"")]:[e,"/"]},tV=eg({display:"flex",alignItems:"center",height:"$layout$headerHeight",borderBottom:"1px solid $colors$surface2",padding:"$space$3 $space$2",background:"$colors$surface1"}),tY=eg({backgroundColor:"$colors$surface2",color:"$colors$clickable",padding:"$space$1 $space$3",borderRadius:"99999px",border:"1px solid $colors$surface2",height:"24px",lineHeight:"24px",fontSize:"inherit",outline:"none",flex:1,marginLeft:"$space$4",width:"0",transition:"background $transitions$default","&:hover":{backgroundColor:"$colors$surface3"},"&:focus":{backgroundColor:"$surface1",border:"1px solid $colors$accent",color:"$colors$base"}}),tG=function(e){var t,n=e.clientId,r=e.onURLChange,o=e.className,a=J(e,["clientId","onURLChange","className"]),i=y.useState(""),s=i[0],l=i[1],c=eX(),u=c.sandpack,d=c.dispatch,p=c.listen,m=y.useState(null!==(t=u.startRoute)&&void 0!==t?t:"/"),f=m[0],v=m[1],h=y.useState(!1),g=h[0],b=h[1],w=y.useState(!1),$=w[0],x=w[1],C=(0,E.E)("sp");y.useEffect(function(){var e=p(function(e){if("urlchange"===e.type){var t=e.url,n=e.back,r=e.forward,o=tZ(t),a=o[0],i=o[1];l(a),v(i),b(n),x(r)}},n);return function(){return e()}},[]);var k=el(C("button","icon"),e0,e3,eg({minWidth:"$space$6",justifyContent:"center"}));return y.createElement("div",z({className:el(C("navigator"),tV,o)},a),y.createElement("button",{"aria-label":"Go back one page",className:k,disabled:!g,onClick:function(){d({type:"urlback"})},type:"button"},y.createElement(G,null)),y.createElement("button",{"aria-label":"Go forward one page",className:k,disabled:!$,onClick:function(){d({type:"urlforward"})},type:"button"},y.createElement(q,null)),y.createElement("button",{"aria-label":"Refresh page",className:k,onClick:function(){d({type:"refresh"})},type:"button"},y.createElement(X,null)),y.createElement("input",{"aria-label":"Current Sandpack URL",className:el(C("input"),tY),name:"Current Sandpack URL",onChange:function(e){v(e.target.value.startsWith("/")?e.target.value:"/"+e.target.value)},onKeyDown:function(e){"Enter"===e.code&&(e.preventDefault(),e.stopPropagation(),"function"==typeof r&&r(s+e.currentTarget.value))},type:"text",value:f}))},tq=function(e){var t=eX().dispatch;return{refresh:function(){return t({type:"refresh"},e)},back:function(){return t({type:"urlback"},e)},forward:function(){return t({type:"urlforward"},e)}}},tX=function(){var e=eX(),t=e.sandpack,n=e.listen,r=e.dispatch,o=y.useRef(null),a=y.useRef(ep());return y.useEffect(function(){var e=o.current,n=a.current;return null!==e&&t.registerBundler(e,n),function(){return t.unregisterBundler(n)}},[]),{sandpack:t,getClient:function(){return t.clients[a.current]||null},clientId:a.current,iframe:o,listen:function(e){return n(e,a.current)},dispatch:function(e){return r(e,a.current)}}},tK=function(e){var t=eX().dispatch;return{restart:function(){return t({type:"shell/restart"},e)},openPreview:function(){return t({type:"shell/openPreview"},e)}}},tQ=eg({position:"absolute",left:"$space$5",bottom:"$space$4",zIndex:"$top",color:"$colors$clickable",animation:e6+" 150ms ease",fontFamily:"$font$mono",fontSize:".8em",width:"75%",p:{whiteSpace:"nowrap",margin:0,textOverflow:"ellipsis",overflow:"hidden"}}),t0=function(e,t){var n;switch(e.state){case"downloading_manifest":return"[1/3] Downloading manifest";case"downloaded_module":return"[2/3] Downloaded "+e.name+" ("+(t-e.totalPending)+"/"+t+")";case"starting_command":return"[3/3] Starting command";case"command_running":return'[3/3] Running "'+(null===(n=e.command)||void 0===n?void 0:n.trim())+'"'}},t1=function(e){var t=e.clientId,n=e.dismissOnTimeout,r=void 0!==n&&n,o=e.timeout,a=void 0===o?5e3:o,i=y.useState(!1),s=i[0],l=i[1],c=y.useState(),u=c[0],d=c[1],p=y.useState(null),m=p[0],f=p[1],v=eX().listen;return(y.useEffect(function(){var e,n=v(function(t){"start"===t.type&&t.firstLoad&&l(!1),"shell/progress"!==t.type||s||(u||"downloaded_module"!==t.data.state||d(t.data.totalPending),void 0!==u&&f(t0(t.data,u)),clearTimeout(e),e=setTimeout(function(){f(r?null:"Still loading...")},a)),"done"===t.type&&!1===t.compilatonError&&(f(null),l(!0),clearTimeout(e))},t);return function(){e&&clearTimeout(e),n()}},[t,s,u]),m)?y.createElement("div",{className:tQ.toString()},y.createElement("p",null,m)):null},t3=eg(((v={flex:1,display:"flex",flexDirection:"column",background:"white",overflow:"auto",position:"relative"})[".sp-bridge-frame"]={border:0,position:"absolute",left:"$space$2",bottom:"$space$2",zIndex:"$top",height:12,width:"30%",mixBlendMode:"multiply",pointerEvents:"none"},v)),t6=eg({border:"0",outline:"0",width:"100%",height:"100%",minHeight:"160px",maxHeight:"2000px",flex:1}),t2=eg({display:"flex",position:"absolute",bottom:"$space$2",right:"$space$2",zIndex:"$overlay",gap:"$space$2"}),t5=y.forwardRef(function(e,t){var n=e.showNavigator,r=void 0!==n&&n,o=e.showRefreshButton,a=e.showOpenInCodeSandbox,i=void 0===a||a,s=e.showSandpackErrorOverlay;e.showOpenNewtab;var l=e.showRestartButton,c=e.actionsChildren,u=void 0===c?y.createElement(y.Fragment,null):c,d=e.children,p=e.className,m=J(e,["showNavigator","showRefreshButton","showOpenInCodeSandbox","showSandpackErrorOverlay","showOpenNewtab","showRestartButton","actionsChildren","children","className"]),f=tX(),v=f.sandpack,h=f.listen,g=f.iframe,b=f.getClient,w=f.clientId,$=y.useState(null),x=$[0],C=$[1],k=v.status,S=v.errorScreenRegisteredRef,N=v.loadingScreenRegisteredRef,O=tq(w).refresh,R=tK(w).restart,M=(0,E.E)("sp");return S.current=!0,N.current=!0,y.useEffect(function(){return h(function(e){"resize"===e.type&&C(e.height)})},[]),y.useImperativeHandle(t,function(){return{clientId:w,getClient:b}},[b,w]),y.createElement(ts,z({className:el("sp-preview",p)},m),r&&y.createElement(tG,{clientId:w,onURLChange:function(e){g.current&&(g.current.src=e)}}),y.createElement("div",{className:el(M("preview-container"),t3)},y.createElement("iframe",{ref:g,className:el(M("preview-iframe"),t6),style:{height:x||void 0},title:"Sandpack Preview"}),y.createElement("div",{className:el(M("preview-actions"),t2)},u,(void 0===l||l)&&"node"===v.environment&&y.createElement(tr,{onClick:R},y.createElement(V,null)),!r&&(void 0===o||o)&&"running"===k&&y.createElement(tr,{onClick:O},y.createElement(X,null)),i&&y.createElement(tA,null)),y.createElement(tB,{clientId:w,showOpenInCodeSandbox:i}),y.createElement(t1,{clientId:w}),(void 0===s||s)&&y.createElement(tR,null),d))});eg(((h={display:"flex",flexDirection:"column",width:"100%",position:"relative",overflow:"auto",minHeight:"160px",flex:1})[".sp-stack"]={height:"100%"},h));var t4=eg({justifyContent:"space-between",borderBottom:"1px solid $colors$surface2",padding:"0 $space$2",fontFamily:"$font$mono",height:"$layout$headerHeight",minHeight:"$layout$headerHeight",overflowX:"auto",whiteSpace:"nowrap"}),t7=eg({display:"flex",flexDirection:"row",alignItems:"center",gap:"$space$2"}),t8=el(e0,e1,eg({padding:"$space$1 $space$3"})),t9=function(e){var t=e.status,n=e.suiteOnly,r=e.setSuiteOnly,o=e.setVerbose,a=e.verbose,i=e.watchMode,s=e.setWatchMode,l=e.showSuitesOnly;return y.createElement("div",{className:el(t4,t7)},y.createElement("div",{className:el(t7)},y.createElement("p",{className:el(eg({lineHeight:1,margin:0,color:"$colors$base",fontSize:"$font$size",display:"flex",alignItems:"center",gap:"$space$2"}))},y.createElement(eo,null),"Tests")),y.createElement("div",{className:el(t7)},l&&y.createElement("button",{className:t8,"data-active":n,disabled:"initialising"===t,onClick:r,type:"button"},"Suite only"),y.createElement("button",{className:t8,"data-active":a,disabled:"initialising"===t,onClick:o,type:"button"},"Verbose"),y.createElement("button",{className:t8,"data-active":i,disabled:"initialising"===t,onClick:s,type:"button"},"Watch")))},ne=function(e){var t=e.onClick;return y.createElement(tr,{onClick:t,title:"Run tests"},y.createElement(Y,null))},nt=eg({variants:{status:{pass:{color:"var(--test-pass)"},fail:{color:"var(--test-fail)"},skip:{color:"var(--test-skip)"},title:{color:"var(--test-title)"}}}}),nn=nt({status:"pass"}),nr=nt({status:"fail"}),no=nt({status:"skip"}),na=nt({status:"title"}),ni=eg({variants:{status:{pass:{background:"var(--test-pass)",color:"$colors$surface1"},fail:{background:"var(--test-fail)",color:"$colors$surface1"},run:{background:"var(--test-run)",color:"$colors$surface1"}}}}),ns=ni({status:"run"}),nl=ni({status:"pass"}),nc=ni({status:"fail"}),nu=eg({marginLeft:"$space$4"}),nd=eg({marginBottom:"$space$2",color:"$colors$clickable"}),np=eg({marginBottom:"$space$2",color:"$colors$hover"}),nm=eg({marginLeft:"$space$2"}),nf=eg({marginRight:"$space$2"}),nv=function(e){var t=e.tests;return e.style,y.createElement("div",{className:el(nu)},t.map(function(e){return y.createElement("div",{key:e.name,className:el(nd)},"pass"===e.status&&y.createElement("span",{className:el(nn,nf)},"✓"),"fail"===e.status&&y.createElement("span",{className:el(nr,nf)},"✕"),"idle"===e.status&&y.createElement("span",{className:el(no,nf)},"○"),y.createElement("span",{className:el(np)},e.name),void 0!==e.duration&&y.createElement("span",{className:el(nm)},"(",e.duration," ms)"))}))},nh=function(e){var t,n,r;return(t=Object.values(null!==(n=e.tests)&&void 0!==n?n:{})).concat.apply(t,Object.values(null!==(r=e.describes)&&void 0!==r?r:{}).map(nh))},ng=function(e){return nh(e).reduce(function(e,t){return{pass:"pass"===t.status?e.pass+1:e.pass,fail:"fail"===t.status?e.fail+1:e.fail,skip:"idle"===t.status||"running"===t.status?e.skip+1:e.skip,total:e.total+1}},{pass:0,fail:0,skip:0,total:0})},nb=function(e){return 0===Object.values(e.describes).length&&0===Object.values(e.tests).length},ny=function(e){var t=e.length-1;return[e.slice(0,t),e[t]]},nE=function(e,t){return e.map(t).reduce(function(e,t){return e.concat(t)},[])},nw=function(e,t){return function(n){return(0,P.Z)(n,e,t)}},n$=eg({color:"$colors$hover",marginBottom:"$space$2"}),nx=eg({marginLeft:"$space$4"}),nC=function(e){var t=e.describes;return y.createElement(y.Fragment,null,t.map(function(e){if(nb(e))return null;var t=Object.values(e.tests),n=Object.values(e.describes);return y.createElement("div",{key:e.name,className:el(nx)},y.createElement("div",{className:el(n$)},e.name),y.createElement(nv,{tests:t}),y.createElement(nC,{describes:n}))}))},nk=eg({color:"$colors$hover",fontSize:"$font$size",padding:"$space$2",whiteSpace:"pre-wrap"}),nS=function(e){var t=e.error,n=e.path;return y.createElement("div",{className:el(nk),dangerouslySetInnerHTML:{__html:nO(t,n)}})},nN=function(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")},nO=function(e,t){var n="";if(n=e.matcherResult?"<span>"+nN(e.message).replace(/(expected)/m,'<span class="'+nn+'">$1</span>').replace(/(received)/m,'<span class="'+nr+'">$1</span>').replace(/(Difference:)/m,"<span>$1</span>").replace(/(Expected:)(.*)/m,'<span>$1</span><span class="'+nn+'">$2</span>').replace(/(Received:)(.*)/m,'<span>$1</span><span class="'+nr+'">$2</span>').replace(/^(-.*)/gm,'<span class="'+nr+'">$1</span>').replace(/^(\+.*)/gm,'<span class="'+nn+'">$1</span>')+"</span>":nN(e.message),e.mappedErrors&&e.mappedErrors[0]&&e.mappedErrors[0].fileName.endsWith(t)&&e.mappedErrors[0]._originalScriptCode){var r=e.mappedErrors[0]._originalScriptCode||[],o=Math.max.apply(Math,r.map(function(e){return(e.lineNumber+"").length}))+2,a=Array.from({length:o}).map(function(){return" "});n+="<br /><br /><div>",r.filter(function(e){return e.content.trim()}).forEach(function(e){var t=(e.lineNumber+"").length,r=W([],a,!0);r.length-=t,e.highlight&&(r.length-=2);var i=e.content.indexOf(".to"),s=Array.from({length:a.length+i-(o-1)},function(){return" "}),l=nN(e.content).replace(/(describe|test|it)(\()(&#039;|&quot;|`)(.*)(&#039;|&quot;|`)/m,'<span>$1$2$3</span><span class="'+na+'">$4</span><span>$5</span>').replace(/(expect\()(.*)(\)\..*)(to[\w\d]*)(\()(.*)(\))/m,'<span>$1</span><span class="'+nr+'">$2</span><span>$3</span><span style="text-decoration: underline; font-weight: 900">$4</span><span>$5</span><span class="'+nn+'">$6</span><span>$7</span>');n+="<div "+(e.highlight?'style="font-weight:200;"':"")+">"+(e.highlight?'<span class="'+nr+'">></span> ':"")+r.join("")+nN(""+e.lineNumber)+" | "+l+"</div>"+(e.highlight?"<div>"+a.join("")+" | "+s.join("")+'<span class="'+nr+'">^</span></div>':"")}),n+="</div>"}return n.replace(/(?:\r\n|\r|\n)/g,"<br />")},nR=eg({display:"flex",flexDirection:"row",alignItems:"center",marginBottom:"$space$2"}),nM=eg({marginBottom:"$space$2"}),nL=eg({fontWeight:"bold"}),nj=eg({borderRadius:"calc($border$radius / 2)"}),nF=eg({padding:"$space$1 $space$2",fontFamily:"$font$mono",textTransform:"uppercase",marginRight:"$space$2"}),nA=eg({fontFamily:"$font$mono",cursor:"pointer",display:"inline-block"}),nT=eg({color:"$colors$clickable",textDecorationStyle:"dotted",textDecorationLine:"underline"}),nD=eg({color:"$colors$hover",fontWeight:"bold",textDecorationStyle:"dotted",textDecorationLine:"underline"}),nI=function(e){var t=e.specs,n=e.openSpec,r=e.status,o=e.verbose;return y.createElement(y.Fragment,null,t.map(function(e){if(e.error)return y.createElement("div",{key:e.name,className:el(nM)},y.createElement(nH,{className:el(nj,nc)},"Error"),y.createElement(nP,{onClick:function(){return n(e.name)},path:e.name}),y.createElement(nS,{error:e.error,path:e.name}));if(nb(e))return null;var t=Object.values(e.tests),a=Object.values(e.describes),i=ng(e);return y.createElement("div",{key:e.name,className:el(nM)},y.createElement("div",{className:el(nR)},"complete"===r?i.fail>0?y.createElement(nH,{className:el(nj,nc)},"Fail"):y.createElement(nH,{className:el(nj,nl)},"Pass"):y.createElement(nH,{className:el(nj,ns)},"Run"),y.createElement(nP,{onClick:function(){return n(e.name)},path:e.name})),o&&y.createElement(nv,{tests:t}),o&&y.createElement(nC,{describes:a}),nh(e).filter(function(e){return"fail"===e.status}).map(function(e){return y.createElement("div",{key:"failing-"+e.name,className:el(nM)},y.createElement("div",{className:el(nL,nr)},"● ",e.blocks.join(" › ")," › ",e.name),e.errors.map(function(t){return y.createElement(nS,{key:"failing-"+e.name+"-error",error:t,path:e.path})}))}))}))},nH=function(e){var t=e.children,n=e.className;return y.createElement("span",{className:el(nF,n)},t)},nP=function(e){var t=e.onClick,n=e.path.split("/"),r=n.slice(0,n.length-1).join("/")+"/",o=n[n.length-1];return y.createElement("button",{className:el(e0,nA),onClick:t,type:"button"},y.createElement("span",{className:el(nT)},r),y.createElement("span",{className:el(nD)},o))},nB=eg({marginBottom:"$space$2"}),nz=eg({fontWeight:"bold",color:"$colors$hover",whiteSpace:"pre-wrap"}),nJ=eg({fontWeight:"bold",color:"$colors$clickable"}),nU=function(e){var t=e.suites,n=e.tests,r=e.duration,o="Test suites: ",a=function(e){var t=Array.from({length:o.length-e.length},function(){return" "}).join("");return e+t};return y.createElement("div",{className:el(nJ)},y.createElement("div",{className:el(nB)},y.createElement("span",{className:el(nz)},o),t.fail>0&&y.createElement("span",{className:el(nr)},t.fail," failed,"," "),t.pass>0&&y.createElement("span",{className:el(nn)},t.pass," passed,"," "),y.createElement("span",null,t.total," total")),y.createElement("div",{className:el(nB)},y.createElement("span",{className:el(nz)},a("Tests:")),n.fail>0&&y.createElement("span",{className:el(nr)},n.fail," failed,"," "),n.skip>0&&y.createElement("span",{className:el(no)},n.skip," skipped,"," "),n.pass>0&&y.createElement("span",{className:el(nn)},n.pass," passed,"," "),y.createElement("span",null,n.total," total")),y.createElement("div",{className:el(nz)},a("Time:"),r/1e3,"s"))},n_=eg({display:"flex",position:"absolute",bottom:"$space$2",right:"$space$2",zIndex:"$overlay","> *":{marginLeft:"$space$2"}}),nW={specs:{},status:"initialising",verbose:!1,watchMode:!0,suiteOnly:!1,specsCount:0},nZ=function(e){var t,n=e.verbose,r=e.watchMode,o=e.style,a=e.className,i=e.onComplete,s=e.actionsChildren,l=J(e,["verbose","watchMode","style","className","onComplete","actionsChildren"]),c=tl(),u=tX(),d=u.getClient,p=u.iframe,m=u.listen,f=u.sandpack,v=y.useState(z(z({},nW),{verbose:void 0!==n&&n,watchMode:void 0===r||r})),h=v[0],g=v[1],b=y.useCallback(function(){g(function(e){return z(z({},e),{status:"running",specs:{}})});var e=d();e&&e.dispatch({type:"run-all-tests"})},[d]),E=y.useCallback(function(){g(function(e){return z(z({},e),{status:"running",specs:{}})});var e=d();e&&e.dispatch({type:"run-tests",path:f.activeFile})},[d,f.activeFile]),w=/.*\.(test|spec)\.[tj]sx?$/,$=null!==f.activeFile.match(w);y.useEffect(function(){var e=[],t="";return m(function(n){if(!h.suiteOnly||(!("path"in n)||n.path===f.activeFile)&&(!("test"in n)||!("path"in n.test)||n.test.path===f.activeFile)){if("action"===n.type&&"clear-errors"===n.action&&"jest"===n.source){t=n.path;return}if("test"===n.type){if("initialize_tests"===n.event)return(e=[],t="",h.watchMode)?b():g(function(e){return z(z({},e),{status:"idle",specs:{}})});if("test_count"===n.event)return g(function(e){return z(z({},e),{specsCount:n.count})});if("total_test_start"===n.event)return e=[],g(function(e){return z(z({},e),{status:"running"})});if("total_test_end"===n.event)return g(function(e){return void 0!==i&&i(e.specs),z(z({},e),{status:"complete"})});if("add_file"===n.event)return g(nw(["specs",n.path],{describes:{},tests:{},name:n.path}));if("remove_file"===n.event)return g(function(e){var t=Object.entries(e.specs).reduce(function(e,t){var r,o=t[0],a=t[1];return o===n.path?e:z(z({},e),((r={})[o]=a,r))},{});return z(z({},e),{specs:t})});if("file_error"===n.event)return g(nw(["specs",n.path,"error"],n.error));if("describe_start"===n.event){e.push(n.blockName);var r=ny(e),o=r[0],a=r[1],s=t;if(void 0===a)return;return g(nw(W(W(["specs",s,"describes"],nE(o,function(e){return[e,"describes"]}),!0),[a],!1),{name:n.blockName,tests:{},describes:{}}))}if("describe_end"===n.event){e.pop();return}if("add_test"===n.event){var l=ny(e),o=l[0],a=l[1],c={status:"idle",errors:[],name:n.testName,blocks:W([],e,!0),path:n.path};return void 0===a?g(nw(["specs",n.path,"tests",n.testName],c)):g(nw(W(W(["specs",n.path,"describes"],nE(o,function(e){return[e,"describes"]}),!0),[a,"tests",n.testName],!1),c))}if("test_start"===n.event){var u=n.test,d=ny(u.blocks),o=d[0],a=d[1],p={status:"running",name:u.name,blocks:u.blocks,path:u.path,errors:[]};return void 0===a?g(nw(["specs",u.path,"tests",u.name],p)):g(nw(W(W(["specs",u.path,"describes"],nE(o,function(e){return[e,"describes"]}),!0),[a,"tests",u.name],!1),p))}if("test_end"===n.event){var m=n.test,v=ny(m.blocks),o=v[0],a=v[1],y={status:m.status,errors:m.errors,duration:m.duration,name:m.name,blocks:m.blocks,path:m.path};return void 0===a?g(nw(["specs",m.path,"tests",m.name],y)):g(nw(W(W(["specs",m.path,"describes"],nE(o,function(e){return[e,"describes"]}),!0),[a,"tests",m.name],!1),y))}}}})},[h.suiteOnly,h.watchMode,f.activeFile]),y.useEffect(function(){return m(function(e){"done"===e.type&&h.watchMode&&($?E():b())})},[E,b,h.watchMode,$]);var x=Object.values(h.specs),C=nE(x,nh).reduce(function(e,t){return e+(t.duration||0)},0),k=x.map(ng).reduce(function(e,t){return{pass:e.pass+t.pass,fail:e.fail+t.fail,skip:e.skip+t.skip,total:e.total+t.total}},{pass:0,skip:0,fail:0,total:0}),S=x.filter(function(e){return Object.values(e.describes).length>0||Object.values(e.tests).length>0}).map(ng).reduce(function(e,t){return{pass:e.pass+(0===t.fail?1:0),fail:e.fail+(t.fail>0?1:0),total:e.total+1}},{pass:0,fail:0,total:0});return y.createElement(ts,z({className:el("sp-tests",a),style:z(z({},{"--test-pass":(t="dark"===c.themeMode)?"#18df16":"#15c213","--test-fail":t?"#df162b":"#c21325","--test-skip":t?"#eace2b":"#c2a813","--test-run":t?"#eace2b":"#c2a813","--test-title":t?"#3fbabe":"#256c6f"}),o)},l),y.createElement("iframe",{ref:p,style:{display:"none"},title:"Sandpack Tests"}),y.createElement(t9,{setSuiteOnly:function(){return g(function(e){return z(z({},e),{suiteOnly:!e.suiteOnly})})},setVerbose:function(){return g(function(e){return z(z({},e),{verbose:!e.verbose})})},setWatchMode:function(){g(function(e){return z(z({},e),{watchMode:!e.watchMode})})},showSuitesOnly:h.specsCount>1,status:h.status,suiteOnly:h.suiteOnly,verbose:h.verbose,watchMode:h.watchMode}),"running"===h.status||"initialising"===h.status?y.createElement(tH,{showOpenInCodeSandbox:!1}):y.createElement("div",{className:n_.toString()},s,y.createElement(ne,{onClick:h.suiteOnly?E:b})),y.createElement("div",{className:el(nV)},0===x.length&&"complete"===h.status?y.createElement("div",{className:el(nY)},y.createElement("p",null,"No test files found."),y.createElement("p",null,"Test match:"," ",y.createElement("span",{className:el(nr)},w.toString()))):y.createElement(y.Fragment,null,y.createElement(nI,{openSpec:function(e){f.setActiveFile(e)},specs:x,status:h.status,verbose:h.verbose}),"complete"===h.status&&k.total>0&&y.createElement(nU,{duration:C,suites:S,tests:k}))))},nV=eg({padding:"$space$4",height:"100%",overflow:"auto",display:"flex",flexDirection:"column",position:"relative",fontFamily:"$font$mono"}),nY=eg({fontWeight:"bold",color:"$colors$base"}),nG=function(e){var t=e.clientId,n=e.maxMessageCount;e.resetOnPreviewRestart;var r=y.useState([]),o=r[0],a=r[1],i=eX().listen;return y.useEffect(function(){return i(function(e){"start"===e.type?a([]):"stdout"===e.type&&e.payload.data&&Boolean(e.payload.data.trim())&&a(function(t){for(var n=W(W([],t,!0),[{data:e.payload.data,id:ep()}],!1);n.length>800;)n.shift();return n})},t)},[void 0===n?800:n,t]),{logs:o,reset:function(){return a([])}}},nq=["SyntaxError: ","Error in sandbox:"],nX={id:"random",method:"clear",data:["Console was cleared"]},nK=(0,eval)("this"),nQ="function"==typeof ArrayBuffer,n0="function"==typeof Map,n1="function"==typeof Set;(r=g||(g={}))[r.infinity=0]="infinity",r[r.minusInfinity=1]="minusInfinity",r[r.minusZero=2]="minusZero";var n3={Arithmetic:function(e){return e===g.infinity?1/0:e===g.minusInfinity?-1/0:e===g.minusZero?-0:e},HTMLElement:function(e){var t=document.implementation.createHTMLDocument("sandbox");try{var n=t.createElement(e.tagName);n.innerHTML=e.innerHTML;for(var r=0,o=Object.keys(e.attributes);r<o.length;r++){var a=o[r];try{n.setAttribute(a,e.attributes[a])}catch(e){}}return n}catch(t){return e}},Function:function(e){var t=function(){};return Object.defineProperty(t,"toString",{value:function(){return"function "+e.name+"() {"+e.body+"}"}}),t},"[[NaN]]":function(){return NaN},"[[undefined]]":function(){},"[[Date]]":function(e){var t=new Date;return t.setTime(e),t},"[[RegExp]]":function(e){return RegExp(e.src,e.flags)},"[[Error]]":function(e){var t=new(nK[e.name]||Error)(e.message);return t.stack=e.stack,t},"[[ArrayBuffer]]":function(e){if(nQ){var t=new ArrayBuffer(e.length);return new Int8Array(t).set(e),t}return e},"[[TypedArray]]":function(e){return"function"==typeof nK[e.ctorName]?new nK[e.ctorName](e.arr):e.arr},"[[Map]]":function(e){if(n0){for(var t=new Map,n=0;n<e.length;n+=2)t.set(e[n],e[n+1]);return t}for(var r=[],o=0;o<e.length;o+=2)r.push([e[n],e[n+1]]);return r},"[[Set]]":function(e){if(n1){for(var t=new Set,n=0;n<e.length;n++)t.add(e[n]);return t}return e}},n6=function(e){if("string"==typeof e||"number"==typeof e||null===e);else if(Array.isArray(e))return e.map(n6);else if("object"==typeof e&&"@t"in e)return(0,n3[e["@t"]])(e.data);return e},n2=function(e,t,n){var r="Object"!==e.constructor.name?e.constructor.name+" ":"";if(n>2)return r;var o=Object.entries(e);return r+"{ "+Object.entries(e).reduce(function(e,r,a){var i=r[0],s=r[1],l=o.length>10?"\n  ":"",c=n5(s,t,n);return 400===a?e+l+"...":a>400?e:e+(0===a?"":", ")+l+i+": "+c},"")+(o.length>10?"\n":" ")+"}"},n5=function(e,t,n){void 0===n&&(n=0);try{var r,o=n6(e);if(Array.isArray(o))return r=n+1,"["+o.reduce(function(e,n,o){return""+e+(o?", ":"")+n5(n,t,r)},"")+"]";switch(typeof o){case"string":return('"'+o+'"').slice(0,1e4);case"number":case"function":case"symbol":return o.toString();case"boolean":return String(o);case"undefined":return"undefined";default:if(o instanceof RegExp||o instanceof Error||o instanceof Date)return o.toString();if(null===o)return String(null);if(o instanceof HTMLElement)return o.outerHTML.slice(0,1e4);if(0===Object.entries(o).length)return"{}";if("@r"in o){if(n>2)return"Unable to print information";var a=t[o["@r"]];return n5(a,t,n+1)}return n2(o,t,n+1)}}catch(e){return"Unable to print information"}},n4=function(e){switch(e){case"warn":return"warning";case"clear":return"clear";case"error":return"error";default:return"info"}},n7=function(e){var t=e.data;return y.createElement(y.Fragment,null,t.map(function(e,t,n){var r=e.data,o=e.id,a=e.method;return r&&Array.isArray(r)?y.createElement(y.Fragment,{key:o},r.map(function(e,r){var i=n.slice(t,n.length);return y.createElement("div",{key:o+"-"+r,className:el(n8({variant:n4(a)}))},y.createElement(tx,{code:"clear"===a?e:n5(e,i),fileType:"js",initMode:"user-visible",showReadOnly:!1,readOnly:!0,wrapContent:!0}))})):null}))},n8=eg(((b={width:"100%",padding:"$space$3 $space$2",fontSize:".8em",position:"relative","&:not(:first-child):after":{content:"",position:"absolute",top:0,left:0,right:0,height:1,background:"$colors$surface3"},".sp-cm":{padding:0},".cm-editor":{background:"none"},".cm-content":{padding:0}})[".sp-pre-placeholder"]={margin:"0 !important",fontSize:"1em"},b.variants={variant:{error:{color:"$colors$error",background:"$colors$errorSurface","&:not(:first-child):after":{background:"$colors$error",opacity:.07}},warning:{color:"$colors$warning",background:"$colors$warningSurface","&:not(:first-child):after":{background:"$colors$warning",opacity:.07}},clear:{fontStyle:"italic"},info:{}}},b)),n9=eg({justifyContent:"space-between",borderBottom:"1px solid $colors$surface2",padding:"0 $space$2",fontFamily:"$font$mono",height:"$layout$headerHeight",minHeight:"$layout$headerHeight",overflowX:"auto",whiteSpace:"nowrap"}),re=eg({display:"flex",flexDirection:"row",alignItems:"center",gap:"$space$2"}),rt=el(e0,e1,eg({padding:"$space$1 $space$3"})),rn=function(e){var t=e.currentTab,n=e.setCurrentTab,r=e.node;return y.createElement("div",{className:el(n9,re)},y.createElement("p",{className:el(eg({lineHeight:1,margin:0,color:"$colors$base",fontSize:"$font$size",display:"flex",alignItems:"center",gap:"$space$2"}))},y.createElement(eo,null),y.createElement("span",null,"Terminal")),r&&y.createElement("div",{className:el(re)},y.createElement("button",{className:rt,"data-active":"server"===t,onClick:function(){return n("server")},type:"button"},"Server"),y.createElement("button",{className:rt,"data-active":"client"===t,onClick:function(){return n("client")},type:"button"},"Client")))},rr=function(e){var t=e.data;return y.createElement(y.Fragment,null,t.map(function(e){var t=e.data,n=e.id;return y.createElement("div",{key:n,className:el(ro)},y.createElement(H(),null,t))}))},ro=eg({width:"100%",padding:"$space$3 $space$2",fontSize:".85em",position:"relative",whiteSpace:"pre","&:not(:first-child):after":{content:"",position:"absolute",top:0,left:0,right:0,height:1,background:"$colors$surface3"}}),ra=function(e){var t=e.clientId,n=e.maxMessageCount,r=e.showSyntaxError,o=void 0!==r&&r,a=e.resetOnPreviewRestart,i=void 0!==a&&a,s=y.useState([]),l=s[0],c=s[1],u=eX().listen;return y.useEffect(function(){return u(function(e){if(i&&"start"===e.type)c([]);else if("console"===e.type&&e.codesandbox){var t=Array.isArray(e.log)?e.log:[e.log];if(t.find(function(e){return"clear"===e.method}))return c([nX]);var n=o?t:t.filter(function(e){return e.data.filter(function(e){return"string"!=typeof e||0===nq.filter(function(t){return e.startsWith(t)}).length}).length>0});if(!n)return;c(function(e){for(var t=W(W([],e,!0),n,!0).filter(function(e,t,n){return t===n.findIndex(function(t){return t.id===e.id})});t.length>800;)t.shift();return t})}},t)},[o,void 0===n?800:n,t]),{logs:l,reset:function(){return c([])}}},ri=y.forwardRef(function(e,t){var n=e.showHeader,r=e.showSyntaxError,o=e.maxMessageCount,a=e.onLogsChange,i=e.className,s=e.showSetupProgress,l=e.resetOnPreviewRestart,c=void 0!==l&&l,u=J(e,["showHeader","showSyntaxError","maxMessageCount","onLogsChange","className","showSetupProgress","resetOnPreviewRestart"]),d=eX().sandpack.environment,p=tK().restart,m=y.useState("node"===d?"server":"client"),f=m[0],v=m[1],h=ra({maxMessageCount:o,showSyntaxError:void 0!==r&&r,resetOnPreviewRestart:c}),g=h.logs,b=h.reset,E=nG({maxMessageCount:o,resetOnPreviewRestart:c}),w=E.logs,$=E.reset,x=y.useRef(null);y.useEffect(function(){null==a||a(g),x.current&&(x.current.scrollTop=x.current.scrollHeight)},[a,g,w,f]);var C="server"===f,k="node"===d;return y.useImperativeHandle(t,function(){return{reset:function(){b(),$()}}}),y.createElement(ts,z({className:el(eg({height:"100%",background:"$surface1",iframe:{display:"none"}}),"sp-console",i)},u),void 0!==s&&s&&y.createElement(t1,{timeout:1e3,dismissOnTimeout:!0}),(void 0===n||n||k)&&y.createElement(rn,{currentTab:f,node:k,setCurrentTab:v}),y.createElement("div",{ref:x,className:el(eg({overflow:"auto",scrollBehavior:"smooth"}))},C?y.createElement(rr,{data:w}):y.createElement(n7,{data:g})),y.createElement("div",{className:el(eg({position:"absolute",bottom:"$space$2",right:"$space$2",display:"flex",gap:"$space$2"}))},C&&y.createElement(tr,{onClick:function(){p(),b(),$()}},y.createElement(V,null)),y.createElement(tr,{onClick:function(){"client"===f?b():$()}},y.createElement(K,null))))}),rs=function(e){var t,n,r,o,a,i,s,l=e.options,c=e.template,u=e.customSetup,d=e.files,p=e.theme,m=J(e,["options","template","customSetup","files","theme"]);null!=l||(l={}),null!==(t=l.resizablePanels)&&void 0!==t||(l.resizablePanels=!0),null!==(n=l.editorWidthPercentage)&&void 0!==n||(l.editorWidthPercentage=50),null!==(r=l.showConsole)&&void 0!==r||(l.showConsole=!1);var f={showTabs:l.showTabs,showLineNumbers:l.showLineNumbers,showInlineErrors:l.showInlineErrors,wrapContent:l.wrapContent,closableTabs:l.closableTabs,initMode:l.initMode,extensions:null===(o=l.codeEditor)||void 0===o?void 0:o.extensions,extensionsKeymap:null===(a=l.codeEditor)||void 0===a?void 0:a.extensionsKeymap,readOnly:l.readOnly,showReadOnly:l.showReadOnly,additionalLanguages:null===(i=l.codeEditor)||void 0===i?void 0:i.additionalLanguages},v={activeFile:l.activeFile,visibleFiles:l.visibleFiles,recompileMode:l.recompileMode,recompileDelay:l.recompileDelay,autorun:l.autorun,bundlerURL:l.bundlerURL,startRoute:l.startRoute,skipEval:l.skipEval,fileResolver:l.fileResolver,initMode:l.initMode,initModeObserverOptions:l.initModeObserverOptions,externalResources:l.externalResources,logLevel:l.logLevel,classes:l.classes},h=y.useState(l.showConsole),g=h[0],b=h[1],E=y.useState(0),w=E[0],$=E[1],x=l.showConsole||l.showConsoleButton,C=null!==(s=ez[c])&&void 0!==s?s:{},k="mode"in C?C.mode:"preview",S=l.showConsoleButton?y.createElement(rc,{counter:w,onClick:function(){return b(function(e){return!e})}}):void 0,N=y.useRef(null),O=y.useState(l.editorWidthPercentage),R=O[0],M=O[1],L=y.useState(70),j=L[0],F=L[1],A=x?ts:y.Fragment,T={flexGrow:100-R,flexShrink:100-R,flexBasis:0,width:100-R+"%",gap:g?1:0,height:l.editorHeight},D=x?{flexGrow:j,flexShrink:j,flexBasis:0,overflow:"hidden"}:T,I=function(e){if(N.current){var t=N.current.parentElement;if(t){var n="horizontal"===N.current.dataset.direction,r=t.getBoundingClientRect(),o=r.left,a=r.top,i=r.height,s=r.width,l=Math.min(Math.max(n?(e.clientX-o)/s*100:(e.clientY-a)/i*100,25),75);n?M(l):F(l),t.querySelectorAll(".sp-stack").forEach(function(e){e.style.pointerEvents="none"})}}},H=function(){var e,t=null===(e=N.current)||void 0===e?void 0:e.parentElement;t&&(t.querySelectorAll(".sp-stack").forEach(function(e){e.style.pointerEvents=""}),N.current=null)};return y.useEffect(function(){if(null==l?void 0:l.resizablePanels)return document.body.addEventListener("mousemove",I),document.body.addEventListener("mouseup",H),function(){document.body.removeEventListener("mousemove",I),document.body.removeEventListener("mouseup",H)}},[l]),y.useEffect(function(){var e;b(null!==(e=null==l?void 0:l.showConsole)&&void 0!==e&&e)},[l.showConsole]),y.createElement(eq,z({key:c,customSetup:u,files:d,options:v,template:c,theme:p},m),y.createElement(tS,null,y.createElement(tC,z({},f,{style:{height:l.editorHeight,flexGrow:R,flexShrink:R,flexBasis:0,overflow:"hidden"}})),l.resizablePanels&&y.createElement("div",{className:el(rl({direction:"horizontal"}),"sp-resize-handler"),"data-direction":"horizontal",onMouseDown:function(e){N.current=e.target},style:{left:"calc("+R+"% - 5px)"}}),y.createElement(A,z({},x?{className:"sp-preset-column",style:T}:{}),"preview"===k&&y.createElement(t5,{actionsChildren:S,showNavigator:l.showNavigator,showRefreshButton:l.showRefreshButton,style:D}),"tests"===k&&y.createElement(nZ,{actionsChildren:S,style:D}),(l.showConsoleButton||g)&&y.createElement(y.Fragment,null,l.resizablePanels&&g&&y.createElement("div",{className:el(rl({direction:"vertical"}),"sp-resize-handler"),"data-direction":"vertical",onMouseDown:function(e){N.current=e.target},style:{top:"calc("+j+"% - 5px)"}}),y.createElement("div",{className:el(rd),style:{flexGrow:g?100-j:0,flexShrink:g?100-j:0,flexBasis:0}},y.createElement(ri,{onLogsChange:function(e){return $(e.length)},showHeader:!1}))))))},rl=eg({position:"absolute",zIndex:"$top",variants:{direction:{vertical:{right:0,left:0,height:10,cursor:"ns-resize"},horizontal:{top:0,bottom:0,width:10,cursor:"ew-resize"}}},"@media screen and (max-width: 768px)":{display:"none"}}),rc=function(e){var t=e.onClick,n=e.counter;return y.createElement(tr,{className:ru.toString(),onClick:t},y.createElement(eo,null),n>0&&y.createElement("strong",null,n))},ru=eg({position:"relative",strong:{background:"$colors$clickable",color:"$colors$surface1",minWidth:12,height:12,padding:"0 2px",borderRadius:12,fontSize:8,lineHeight:"12px",position:"absolute",top:0,right:0,fontWeight:"normal"}}),rd=eg({width:"100%",overflow:"hidden"})}}]);